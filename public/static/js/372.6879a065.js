"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[372],{10372:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"container"},[a("div",{staticClass:"container-form"},[a("el-form",{ref:"qryParamRef",attrs:{model:e.qryParam,size:"small"}},[a("div",{staticClass:"row-container"},[a("div",{staticClass:"left-row"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.fullMsisdn"),prop:"fullMsisdn"}},[a("el-input",{attrs:{placeholder:e.inputPh("cardMag.fullMsisdn")},on:{input:a=>e.qryParam.fullMsisdn=a.replace(/\D/g,"")},model:{value:e.qryParam.fullMsisdn,callback:function(a){e.$set(e.qryParam,"fullMsisdn",a)},expression:"qryParam.fullMsisdn"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.custId"),prop:"custId"}},[a("ct-select",{attrs:{placeholder:e.selectPh("cardMag.custId"),options:e.custOptions},model:{value:e.qryParam.custId,callback:function(a){e.$set(e.qryParam,"custId",a)},expression:"qryParam.custId"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.channelId"),prop:"channelId"}},[a("ct-select",{attrs:{disabled:!e.qryParam.custId,placeholder:e.selectPh("cardMag.channelId"),options:e.channelIdOptions},model:{value:e.qryParam.channelId,callback:function(a){e.$set(e.qryParam,"channelId",a)},expression:"qryParam.channelId"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.powerSearch,expression:"powerSearch"}],staticClass:"more-query-group"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.equipmentSupplierId"),prop:"equipmentSupplierId"}},[a("ct-select",{attrs:{placeholder:e.selectPh("cardMag.equipmentSupplierId"),options:e.equipmentSupplierIdOptions,"label-key":"equipmentSupplierName","value-key":"equipmentSupplierId"},model:{value:e.qryParam.equipmentSupplierId,callback:function(a){e.$set(e.qryParam,"equipmentSupplierId",a)},expression:"qryParam.equipmentSupplierId"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.fullCardSource"),prop:"fullCardSource"}},[a("ct-select",{attrs:{placeholder:e.selectPh("cardMag.fullCardSource"),options:e.fullCardSourceOptions},model:{value:e.qryParam.fullCardSource,callback:function(a){e.$set(e.qryParam,"fullCardSource",a)},expression:"qryParam.fullCardSource"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.ispComposeType"),prop:"ispComposeType"}},[a("ct-select",{attrs:{placeholder:e.selectPh("cardMag.ispComposeType"),options:e.ispComposeTypeOptions,"label-key":"label","value-key":"value"},model:{value:e.qryParam.ispComposeType,callback:function(a){e.$set(e.qryParam,"ispComposeType",a)},expression:"qryParam.ispComposeType"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("cardMag.sdk"),prop:"sdk"}},[a("ct-select",{attrs:{placeholder:e.selectPh("cardMag.sdk"),options:e.sdkOptions,"label-key":"label","value-key":"value"},model:{value:e.qryParam.sdk,callback:function(a){e.$set(e.qryParam,"sdk",a)},expression:"qryParam.sdk"}})],1)],1)],1)],1)],1),a("div",{staticClass:"right-row"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("div",{staticClass:"search-button-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.queryFullSimCardListForPage(!1)}}},[e._v(e._s(e.$t("cardMag.query")))]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.reset}},[e._v(e._s(e.$t("cardMag.resetting")))]),a("show-more-button",{model:{value:e.powerSearch,callback:function(a){e.powerSearch=a},expression:"powerSearch"}})],1)])],1)],1)]),a("div",{directives:[{name:"compPriv",rawName:"v-compPriv",value:83,expression:"83"}],staticClass:"tool-button-group"},[a("el-form-item",{attrs:{"label-width":"0"}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{height:"100%",width:"100%","element-loading-text":e.$t("cardMag.loading"),data:e.tableData,border:!0}},[a("el-table-column",{attrs:{prop:"fullMsisdn",label:e.$t("cardMag.fullMsisdn"),"show-overflow-tooltip":"",resizable:"","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"cor-blue",on:{click:function(a){return e.toDetail(t.row.fullMsisdn)}}},[e._v(e._s(t.row.fullMsisdn))])]}}])}),a("el-table-column",{attrs:{prop:"equipmentSupplierName",label:e.$t("cardMag.equipmentSupplierId"),"show-overflow-tooltip":"","min-width":"150"}}),a("el-table-column",{attrs:{prop:"fullCardSourceDesc",label:e.$t("cardMag.fullCardSource"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"ispComposeTypeDesc",label:e.$t("cardMag.ispComposeType"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"custName",label:e.$t("cardMag.custId"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"channelName",label:e.$t("cardMag.channelId"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"sdkDesc",label:e.$t("cardMag.sdk"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"imei",label:"IMEI","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"imeiStatusDesc",label:e.$t("cardMag.imeiStatusDesc"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"simStatusDesc",label:e.$t("cardMag.simStatusDesc"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"strategyName",label:e.$t("cardMag.strategyName"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"netIspName",label:e.$t("cardMag.netIspName"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"netDb",label:e.$t("cardMag.netDb"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"mainOfferName",label:e.$t("cardMag.mainOfferName"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"usage",label:e.$t("cardMag.usage"),"show-overflow-tooltip":"","min-width":"140"}}),a("el-table-column",{attrs:{prop:"importTaskId",label:e.$t("cardMag.importTaskId"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"activeTime",label:e.$t("cardMag.activeTime"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"refreshTime",label:e.$t("cardMag.refreshTime"),"show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:e.$t("cardMag.operate"),fixed:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return["1"===t.sdk?a("div",[a("el-button",{attrs:{type:"text",disabled:t.strategyId<=0},on:{click:function(a){return e.changeNet(t)}}},[e._v(e._s(e.$t("cardMag.switchingNetwork")))])],1):e._e(),"1"===t.sdk?a("div",[a("el-button",{attrs:{type:"text",disabled:t.strategyId<=0},on:{click:function(a){return e.changeTactics(t)}}},[e._v(e._s(e.$t("cardMag.switchingStrategy")))])],1):e._e()]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],attrs:{background:"","current-page":e.page.pageIndex,align:"right","page-sizes":[10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("ChangeNetDialog",{attrs:{visible:e.changeNetDialogVisible,"detail-info":e.detailInfo},on:{"update:visible":function(a){e.changeNetDialogVisible=a},queryFullSimCardListForPage:e.queryFullSimCardListForPage}}),a("ChangeTacticsDialog",{attrs:{visible:e.changeTacticsDialogVisible,"detail-info":e.detailInfo},on:{"update:visible":function(a){e.changeTacticsDialogVisible=a},queryFullSimCardListForPage:e.queryFullSimCardListForPage}})],1)},s=[],r=(t(70560),t(48076)),i=t(90408),o=t(41090),n=function(){var e=this,a=e._self._c;return a("div",[a("el-dialog",{attrs:{title:e.$t("cardMag.switchingNetwork"),visible:e.v,"before-close":e.handleClose,width:"480px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(a){e.v=a},open:e.open}},[a("el-form",{ref:"paramFormRef",staticClass:"demo-ruleForm",attrs:{model:e.paramForm,rules:e.paramRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:e.$t("cardMag.fullMsisdn")}},[a("el-input",{attrs:{disabled:!0},model:{value:e.paramForm.fullMsisdn,callback:function(a){e.$set(e.paramForm,"fullMsisdn",a)},expression:"paramForm.fullMsisdn"}})],1),a("el-form-item",{attrs:{label:e.$t("cardMag.netIspName")}},[a("el-input",{attrs:{disabled:!0},model:{value:e.paramForm.netIspName,callback:function(a){e.$set(e.paramForm,"netIspName",a)},expression:"paramForm.netIspName"}})],1),a("el-form-item",{attrs:{label:e.$t("cardMag.targetCarrier"),prop:"newIspId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.paramForm.newIspId,callback:function(a){e.$set(e.paramForm,"newIspId",a)},expression:"paramForm.newIspId"}},e._l(e.ispIdOptions,(function(e){return a("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.clickOk}},[e._v(e._s(e.$t("cardMag.ok")))]),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("cardMag.cancel")))])],1)],1)],1)},c=[],p={name:"ChangePackageDialog",props:{visible:{type:Boolean,default:!1},modifyTitle:{type:String,default:"切网"},detailInfo:{type:Object,default:()=>{}}},data(){return{paramForm:{fullMsisdn:"",netIspName:"",newIspId:""},paramRules:{newIspId:[{required:!0,message:"请选择目标运营商",trigger:"change"}]},allIspOptions:[],ispIdOptions:[],btnLoading:!1}},computed:{v:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},created(){},methods:{open(){for(const e in this.paramForm)this.paramForm[e]=this.detailInfo[e];this.paramForm.newIspId="",this.ispIdOptions=this.allIspOptions?.filter((e=>e.code!=this.detailInfo.netIspId))||[]},queryFullOfferGeneralParam(){try{this.$api.fullMealMgr.queryFullOfferGeneralParam().then((e=>{this.allIspOptions=e?.Isp}))}catch(e){}},clickOk(){this.$refs.paramFormRef.validate((e=>{e&&this.changeFullNetwork()}))},changeFullNetwork(){this.btnLoading=!0;try{this.$api.fullCardMag.changeFullNetwork({fullMsisdn:this.paramForm.fullMsisdn,newIspId:this.paramForm.newIspId}).then((e=>{this.$message.success("切网成功！"),this.v=!1,this.$emit("queryFullSimCardListForPage",!1)})).finally((()=>{this.btnLoading=!1}))}catch(e){this.btnLoading=!1}},cancel(){this.v=!1},handleClose(){this.cancel()}}},d=p,u=t(43736),m=(0,u.Z)(d,n,c,!1,null,"1e50f732",null),h=m.exports,g=function(){var e=this,a=e._self._c;return a("div",[a("el-dialog",{attrs:{title:e.$t("cardMag.switchingStrategy"),visible:e.v,"before-close":e.handleClose,width:"480px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(a){e.v=a},open:e.open}},[a("el-form",{ref:"paramFormRef",staticClass:"demo-ruleForm",attrs:{model:e.paramForm,rules:e.paramRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:e.$t("cardMag.fullMsisdn")}},[a("el-input",{attrs:{disabled:!0},model:{value:e.paramForm.fullMsisdn,callback:function(a){e.$set(e.paramForm,"fullMsisdn",a)},expression:"paramForm.fullMsisdn"}})],1),a("el-form-item",{attrs:{label:e.$t("cardMag.strategyName")}},[a("el-input",{attrs:{disabled:!0},model:{value:e.paramForm.strategyName,callback:function(a){e.$set(e.paramForm,"strategyName",a)},expression:"paramForm.strategyName"}})],1),a("el-form-item",{attrs:{label:e.$t("cardMag.targetStrategy"),prop:"newStrategyId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.paramForm.newStrategyId,callback:function(a){e.$set(e.paramForm,"newStrategyId",a)},expression:"paramForm.newStrategyId"}},e._l(e.newStrategyIdOptions,(function(e){return a("el-option",{key:e.strategyId,attrs:{label:e.strategyName,value:e.strategyId}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.clickOk}},[e._v(e._s(e.$t("cardMag.ok")))]),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("cardMag.cancel")))])],1)],1)],1)},f=[],b={name:"ChangePackageDialog",props:{visible:{type:Boolean,default:!1},modifyTitle:{type:String,default:"切换策略"},detailInfo:{type:Object,default:()=>{}}},data(){return{paramForm:{fullMsisdn:"",strategyName:"",newStrategyId:""},paramRules:{newStrategyId:[{required:!0,message:"请选择目标策略",trigger:"change"}]},newStrategyIdOptions:[],btnLoading:!1}},computed:{v:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{open(){for(const e in this.paramForm)this.paramForm[e]=this.detailInfo[e];this.paramForm.newStrategyId="",this.queryTargetStrategys()},queryTargetStrategys(){try{const{custId:e,sdk:a,equipmentSupplierId:t}=this.detailInfo;this.$api.fullStrategyMag.queryTargetStrategy({custId:e,sdk:a,equipmentSupplierId:t}).then((e=>{this.newStrategyIdOptions=e?.filter((e=>e.strategyId!=this.detailInfo.strategyId))}))}catch(e){}},clickOk(){this.$refs.paramFormRef.validate((e=>{e&&this.changeFullSimStrategy()}))},changeFullSimStrategy(){this.btnLoading=!0;try{this.$api.fullCardMag.changeFullSimStrategy({fullMsisdn:this.paramForm.fullMsisdn,newStrategyId:this.paramForm.newStrategyId}).then((e=>{this.$message.success("切换策略成功！"),this.v=!1,this.$emit("querySimCardListForPage",!1)})).finally((()=>{this.btnLoading=!1}))}catch(e){this.btnLoading=!1}},cancel(){this.v=!1},handleClose(){this.cancel()}}},y=b,v=(0,u.Z)(y,g,f,!1,null,"488cd542",null),w=v.exports;const I={fullMsisdn:"",custId:"",channelId:"",equipmentSupplierId:"",fullCardSource:"",ispComposeType:"",sdk:""};var S={components:{ChangeNetDialog:h,ChangeTacticsDialog:w},mixins:[o.Z],data(){return{labelWidth:"80px",channelIdOptions:[],links:[{name:"全能卡管理"},{name:"号卡管理"}],powerSearch:!1,loading:!1,page:{pageIndex:1,pageSize:10,total:0},CHANNEL_ROLE_TYPE:r.CHANNEL_ROLE_TYPE,tableData:[],equipmentSupplierIdOptions:[],zhFullCardSourceOptions:[{label:"标准卡",value:"1000"},{label:"定制卡",value:"2000"}],enFullCardSourceOptions:[{label:"Norm card",value:"1000"},{label:"Custom card",value:"2000"}],zhIspComposeTypeOptions:[{label:"双网",value:"2000"},{label:"三网",value:"3000"}],enIspComposeTypeOptions:[{label:"Dual network",value:"2000"},{label:"Three networks",value:"3000"}],zhSdkOptions:[{label:"SDK切换",value:"1"},{label:"重启切换",value:"2"},{label:"断网切换",value:"3"}],enSdkOptions:[{label:"SDK switching",value:"1"},{label:"Restart switching",value:"2"},{label:"Off-network switching",value:"3"}],zhCustOptions:[{label:"中国电信",value:"1",children:[{label:"北京电信",value:"1-1"},{label:"南京电信",value:"1-2"}]},{label:"中国移动",value:"2",children:[{label:"上海移动",value:"2-1"},{label:"武汉移动",value:"2-2"},{label:"天津移动",value:"2-3"}]},{label:"中国联通",value:"3",children:[{label:"南昌联通",value:"3-1"},{label:"长沙联通",value:"3-2"}]}],enCustOptions:[{label:"China Telecom",value:"1",children:[{label:"Beijing Telecom",value:"1-1"},{label:"Nanjing Telecom",value:"1-2"}]},{label:"China Mobile",value:"2",children:[{label:"Shanghai Mobile",value:"2-1"},{label:"Wuhan Mobile",value:"2-2"},{label:"Tianjin Mobile",value:"2-3"}]},{label:"China Unicom",value:"3",children:[{label:"Nanchang Unicom",value:"3-1"},{label:"Changsha Unicom",value:"3-2"}]}],modifyTitle:"新建",modifyParamDialogVisible:!1,statusCd:"1000",selectUserVisible:!1,selectCustomerVisible:!1,qryParam:{...I},saleList:[],modifyForm:{},detailInfo:{},changeNetDialogVisible:!1,changeTacticsDialogVisible:!1}},computed:{...(0,i.Se)("user",["userRoleType"]),fullCardSourceOptions(){return"zh"===this.$i18n.locale?this.zhFullCardSourceOptions:this.enFullCardSourceOptions},ispComposeTypeOptions(){return"zh"===this.$i18n.locale?this.zhIspComposeTypeOptions:this.enIspComposeTypeOptions},sdkOptions(){return"zh"===this.$i18n.locale?this.zhSdkOptions:this.enSdkOptions},custOptions(){return"zh"===this.$i18n.locale?this.zhCustOptions:this.enCustOptions}},watch:{"qryParam.custId":{handler(e){this.qryParam.channelId="",this.channelIdOptions=this.custOptions.find((a=>a.value===e)).children}}},mounted(){this.queryEquipmentSupplierId(),this.queryFullSimCardListForPage(!1)},methods:{queryEquipmentSupplierId(){this.$api.fullStrategyMag.queryEquipmentSupplierId().then((e=>{this.equipmentSupplierIdOptions=e}))},clearChannelIdFn(){this.qryParam.channelId=""},changeNet(e){this.detailInfo=e,this.changeNetDialogVisible=!0},changeTactics(e){this.detailInfo=e,this.changeTacticsDialogVisible=!0},async queryFullSimCardListForPage(e){try{this.loading=!0,e||(this.page.pageIndex=1,this.page.pageSize=10);const a={...this.qryParam,...this.page};this.$api.fullCardMag.queryFullSimCardListForPage(a).then((e=>{this.tableData=e.list||[],this.page.total=e.total})).finally((()=>{this.loading=!1}))}catch(a){this.loading=!1}},toDetail(e){this.$router.push({path:"cardMagDetail",query:{fullMsisdn:e}})},handleSizeChange(e){this.page.pageSize=e,this.page.pageIndex=1,this.queryFullSimCardListForPage(!0)},handleCurrentChange(e){this.page.pageIndex=e,this.queryFullSimCardListForPage(!0)},reset(){this.qryParam={...I},this.queryFullSimCardListForPage(!1)},exportTable(){const e={...this.qryParam,...this.page};this.$api.fullCardMag.batchExportSimCardList(e).then((e=>{const a=this,t=this.$createElement;this.$msgbox({title:"操作成功",type:"success",center:!0,message:t("p",{class:"fs12"},["文件下载任务已生成，请到下载任务页面",t("a",{class:"cor-blue",on:{click:a.viewProgress}},"查看任务进度")]),showCancelButton:!1,confirmButtonText:"知道了"}).then((()=>{})).catch((()=>{}))}))},viewProgress(){this.$msgbox.close(),this.$router.push("/userMag/download")}}},C=S,M=(0,u.Z)(C,l,s,!1,null,"7a47e90c",null),k=M.exports},48076:function(e,a,t){t.d(a,{HW:function(){return r},P4:function(){return s},hm:function(){return l}});const l=[{value:"100000",label:"在用",key:"use"},{value:"120000",label:"停机",key:"stop"},{value:"140002",label:"未激活",key:"unactivated"}],s="121215042193",r="160605376671"}}]);
//# sourceMappingURL=372.6879a065.js.map