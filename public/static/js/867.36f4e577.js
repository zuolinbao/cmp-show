"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[867],{94867:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"container-content"},[e("div",{staticClass:"container-top"},[e("div",{staticClass:"seperator-line"}),e("el-tabs",{staticClass:"page-tabs page-cont",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:t.$t("simMag.basicInfo"),name:"1"}},[e("BasicInfo",{attrs:{"detail-info":t.detailInfo}})],1),e("el-tab-pane",{attrs:{label:t.$t("simMag.offerInfo"),name:"2"}},[e("PackageInfo",{attrs:{"detail-info":t.detailInfo},on:{refreshTotalFlowMB:t.refreshTotalFlowMB}})],1)],1)],1)])])},o=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"summary"},[e("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},t._l(t.infoList,(function(a){return e("el-col",{key:a.prop,attrs:{span:4}},[e("CtTooltip",{attrs:{label:a.label,content:t.itemInfoFormatter(a)}})],1)})),1)],1),e("div",{staticClass:"container-bottom"},[e("ct-section-title",{attrs:{title:t.$t("simMag.basicInfoTitle")}}),e("Function",{attrs:{"detail-info":t.detailInfo}})],1),t._e()])},i=[],l=a(48076),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-container"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.tableData,border:!0}},[e("el-table-column",{attrs:{prop:"appProdInstDto.prodName",label:t.$t("simMag.prodName"),"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"appProdInstDto.prodNbr",label:t.$t("simMag.prodNbr"),"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"attrName",label:t.$t("simMag.attrName"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.appProdInstAttrDtos,(function(a,s){return e("div",{key:s},[t._v(" "+t._s(a.attrName)+": "+t._s(t.formatterValue(a))+" ")])}))}}])}),e("el-table-column",{attrs:{prop:"appProdInstDto.createDate",label:t.$t("simMag.effDate"),"show-overflow-tooltip":""}})],1)],1)},d=[],f=a(45101),m={props:{detailInfo:{type:Object,required:!0,default:()=>{}}},data(){return{page:{pageIndex:1,pageSize:10,total:0},tableData:[],loading:!1}},mounted(){this.qryProdInstSubList()},methods:{async qryProdInstSubList(){try{this.loading=!0;const{ownerCustId:t}=this.detailInfo.appProdInstDto,e=this.detailInfo.appProdInstDto.prodInstId,a={accProdInstId:e,ownerCustId:t},s=await(0,f.Z)("/prodInst/qryProdInstSubList",a,{method:"get"});this.tableData=s||[],this.page.total=s.total,this.loading=!1}catch(t){this.loading=!1}},formatterValue(t){return t.attrValueName?t.attrValueName:t.attrValue},handleSizeChange(t){this.page.pageSize=t,this.page.pageIndex=1,this.qrySimChangeHis()},handleCurrentChange(t){this.page.pageIndex=t,this.qrySimChangeHis()}}},p=m,c=a(43736),u=(0,c.Z)(p,n,d,!1,null,"bff8fc5e",null),g=u.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-container"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.tableData,border:!0}},[e("el-table-column",{attrs:{prop:"appProdInstDto.realNameAuthStatus",label:t.$t("simMag.identityStatus"),formatter:t.rowFormatter,"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"appProdInstDto.realNameAuthDate",label:t.$t("simMag.identityTime"),"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"appProdInstDto.realNameAuthUserName",label:t.$t("simMag.identityUserName"),"show-overflow-tooltip":""}})],1)],1)},I=[],b={props:{detailInfo:{type:Object,required:!0,default:()=>{}}},data(){return{page:{pageIndex:1,pageSize:10,total:0},tableData:[],loading:!1}},methods:{rowFormatter(t,e,a){return 1===a?this.$t("simMag.identityStatus1"):this.$t("simMag.identityStatus")}}},A=b,w=(0,c.Z)(A,h,I,!1,null,"50778fc6",null),y=w.exports,D={components:{Function:g,Identity:y},props:{detailInfo:{type:Object,required:!0,default:()=>{}}},data(){return{info:{}}},computed:{needRealNameAuth(){return 1===this.detailInfo.appProdInstDto.needRealNameAuth},infoList(){const t=[{label:"ICCID",prop:"iccid"},{label:"MSISDN",prop:"msisdn",formatter:t=>t.appProdInstDto.accNum},{label:"IMSI",prop:"ctgImsi"},{label:this.$t("simMag.simStatus"),formatter:t=>this.rowFormatter(t.appProdInstDto.statusCd)},{label:this.$t("simMag.addressId"),formatter:t=>t.appProdInstDto?.addressName??"-"},{label:this.$t("simMag.cust"),formatter:t=>t.appCustomerDto?.custName??"-"},{label:this.$t("simMag.openDate"),formatter:t=>t.appProdInstDto.createDate},{label:this.$t("simMag.actDate"),formatter:t=>t.appProdInstDto.actDate}];let e=[];return this.needRealNameAuth&&(e=[{label:this.$t("simMag.identityStatus"),formatter:t=>1===t.appProdInstDto.realNameAuthStatus?this.$t("simMag.identityStatus1"):this.$t("simMag.identityStatus0")},{label:this.$t("simMag.identityTime"),formatter:t=>t.appProdInstDto.realNameAuthDate},{label:this.$t("simMag.identityUserName"),formatter:t=>t.appProdInstDto.realNameAuthUserName}]),[...t,...e]}},methods:{itemInfoFormatter(t){const e=t.formatter?t.formatter(this.detailInfo):this.detailInfo[t.prop]??"-";return e},rowFormatter(t){const e=l.hm.find((e=>e.value===t));return e?this.$t("simMag."+e.key):t}}},C=D,P=(0,c.Z)(C,r,i,!1,null,"99419370",null),v=P.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"summary"},t._l(t.summaryList,(function(a,s){return e("div",{key:a.title,staticClass:"summary-item"},[e("img",{staticClass:"summary-item-left",attrs:{src:a.imgSrc}}),e("div",{staticClass:"summary-item-right"},[e("div",{staticClass:"summary-item-right-title"},[t._v(" "+t._s(a.title)),0===s&&t.simCardType?e("a",{class:t.refreshIcon,staticStyle:{"margin-left":"10px"},on:{click:t.refreshTotalFlowMB}}):t._e()]),e("div",{staticClass:"summary-item-right-used"},[t._v(" "+t._s(a.formatter())+" ")])])])})),0),e("div",{staticClass:"main-info"},[e("ct-section-title",{staticClass:"main-info-title",attrs:{title:t.$t("simMag.packageInfoTitle")}}),e("el-row",{attrs:{gutter:20}},t._l(t.infoList,(function(a){return e("el-col",{key:a.prop,attrs:{span:4}},[e("CtTooltip",{attrs:{label:a.label,content:t.itemInfoFormatter(a)}})],1)})),1)],1),e("SupplyOfferTable",{attrs:{"select-package-list":t.selectPackageList}})],1)},M=[],N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-container"},[e("ct-section-title",{staticClass:"section-title",attrs:{title:t.$t("simMag.selectOffer")}}),e("el-table",{ref:"table",attrs:{data:t.selectPackageList,border:!0,height:"100%"}},[e("el-table-column",{attrs:{prop:"offerName",label:t.$t("simMag.selectOfferName"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"offerNbr",label:t.$t("simMag.offerNbr"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"effDate",label:t.$t("simMag.effDate"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"expDate",label:t.$t("simMag.expDate"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"totalUsageValue",label:t.$t("simMag.totalUsageValue"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"usageValue",label:t.$t("simMag.usageValue"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),e("el-table-column",{attrs:{prop:"remainValue",label:t.$t("simMag.remainValue"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}})],1)],1)},U=[],k={props:{selectPackageList:{type:Array,required:!0,default:()=>[]}}},F=k,L=(0,c.Z)(F,N,U,!1,null,"f976aa3e",null),B=L.exports,T={components:{SupplyOfferTable:B},props:{detailInfo:{type:Object,required:!0,default:()=>{}}},data(){return{value1:!0,loading:!1,mainOfferInst:{},planTotalUsage:"",totalBillUsage:"",totalOverUsage:"",selectPackageList:[],simCardType:0,offerUsage:{}}},computed:{refreshIcon(){const t=this.loading?"el-icon-loading":"el-icon-refresh";return t+" cor-blue"},offerFlag(){const{optionalPackageUsageList:t}=this.offerUsage;return!!t&&(t.length>0&&this.selectPackageList.length>0)},summaryList(){return[{title:this.$t("simMag.totalUsage"),formatter:()=>this.detailInfo.totalFlowMB||"-",imgSrc:a(40016)},{title:this.$t("simMag.mainOfferUsage"),formatter:()=>this.offerUsage.mainOfferUsageValue||"-",imgSrc:a(31659)},{title:this.$t("simMag.selectOfferUsage"),formatter:()=>this.offerUsage.optionalPackageUsageValue||"-",imgSrc:a(78888)}]},infoList(){return[{label:this.$t("simMag.offerName"),prop:"offerName"},{label:this.$t("simMag.offerNbr"),prop:"offerNbr"},{label:this.$t("simMag.effDate"),prop:"effDate"},{label:this.$t("simMag.expDate"),prop:"expDate"},{label:this.$t("simMag.statusCd"),prop:"statusCd",formatter:t=>"1000"===t?this.$t("simMag.statusCdGood"):this.$t("simMag.statusCdBad")}]}},watch:{offerFlag(t){t&&this.selectPackageList.forEach((t=>{this.offerUsage.optionalPackageUsageList.forEach((e=>{e.offerInstId===t.offerInstId&&(this.$set(t,"usageValue",e.usageValue),this.$set(t,"totalUsageValue",e.totalUsageValue),this.$set(t,"remainValue",e.remainValue))}))}))}},mounted(){this.qryOfferUsageByProdInst(),this.qryMainOfferInstByProdInst(),this.qrySelectPackageByProdInst(),this.qrySimCardType(),this.qrySimMonthFlowUsage()},methods:{itemInfoFormatter(t){const e=t.formatter?t.formatter(this.mainOfferInst[t.prop]):this.mainOfferInst[t.prop]??"-";return e},async qryOfferUsageByProdInst(){const t={prodInstId:this.detailInfo.appProdInstDto.prodInstId},e=await(0,f.Z)("/offerInst/qryOfferUsageByProdInst",t,{method:"get"});this.offerUsage=e??{}},async qrySimCardType(){const t={prodInstId:this.detailInfo.appProdInstDto.prodInstId},e=await(0,f.Z)("/prodInst/qrySimCardType",t,{method:"get"});this.simCardType=e},async qryMainOfferInstByProdInst(){try{const t={prodInstId:this.detailInfo.appProdInstDto.prodInstId},e=await(0,f.Z)("/offerInst/qryMainOfferInstByProdInst",t,{method:"get"});this.mainOfferInst=e}catch(t){}},async qrySelectPackageByProdInst(){try{const t={prodInstId:this.detailInfo.appProdInstDto.prodInstId},e=await(0,f.Z)("/offerInst/qrySelectPackageByProdInst",t,{method:"get"});this.selectPackageList=e}catch(t){}},async qrySimMonthFlowUsage(){const t={msisdn:this.detailInfo.appProdInstDto.accNum,prodInstId:this.detailInfo.appProdInstDto.prodInstId,custId:this.detailInfo.appProdInstDto.useCustId,addressId:this.detailInfo.appProdInstDto.addressId},e=await(0,f.Z)("/prodInst/qrySimMonthFlowUsage",t,{method:"post"});this.$emit("refreshTotalFlowMB",e.totalFlowMB)},async refreshTotalFlowMB(){const t={msisdn:this.detailInfo.appProdInstDto.accNum,prodInstId:this.detailInfo.appProdInstDto.prodInstId,custId:this.detailInfo.appProdInstDto.useCustId,addressId:this.detailInfo.appProdInstDto.addressId};this.loading=!0;const e=await(0,f.Z)("/prodInst/qrySimMonthFlowUsage",t,{method:"post"}).finally((()=>this.loading=!1));this.loading=!0;const a={msisdn:this.detailInfo.appProdInstDto.accNum,iccid:this.detailInfo.iccid,monthUsage:e.totalFlowMB??"",addressId:this.detailInfo.appProdInstDto.addressId},s=await(0,f.Z)("/offerInst/refreshRealTimeFlow",a,{method:"get"}).finally((()=>this.loading=!1));this.$emit("refreshTotalFlowMB",s.realTimeMonthUsage)}}},x=T,q=(0,c.Z)(x,S,M,!1,null,"724b8d68",null),E=q.exports,O={components:{BasicInfo:v,PackageInfo:E},data(){return{detailInfo:{},activeTab:"1"}},created(){try{this.detailInfo=JSON.parse(this.$route.query.row)}catch(t){}},methods:{refreshTotalFlowMB(t){this.detailInfo={...this.detailInfo,totalFlowMB:t}}}},V=O,Z=(0,c.Z)(V,s,o,!1,null,"9797fef0",null),j=Z.exports},48076:function(t,e,a){a.d(e,{HW:function(){return r},P4:function(){return o},hm:function(){return s}});const s=[{value:"100000",label:"在用",key:"use"},{value:"120000",label:"停机",key:"stop"},{value:"140002",label:"未激活",key:"unactivated"}],o="121215042193",r="160605376671"},40016:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAy5JREFUSEu1lU9sVFUUxr/vzLxXajO0KaANKDEyUqOg0KbENsaY4EZdKJEa0JXGhRtISmjYzsINf6PRxLh1IcZ20cSVrtwRUv/FqBFSCRYbmgrVtrYw783cj9w7fS/TQAGNvN3983733O9851xilW9wUIWJLnSyWG0n2Ioio1odgpQUoKpqLXPlacyOjLB+KwRvmqzI+hZxf4q0yxwKqx3s552hHiGaHm/DDCp0zXtXgB+vKG5ZSMohwn/xCbpWLcUTv1SYZL/lYA9tnUu6ZYyzRSd7hHCvgDYAaGNjnlOQOyPYmNFdyEFOybX2+FwGb4Arst6FZKvAtjAWIkcMEdwLwFYJ3l99TMJJo6rhSGjx21J83ssSwH3D6qq7dFMGFfk+gF13qcY4pYMgUr+/YNHU+HFO87mKin8vptuyRAk8AmDwLqHLsehzA45lCe1oi37izgPawDjdHCa9ptRn2fU3dRIPrgOe7iaef5KoO0ACigXg7Hnh3dHcCE7ivkxzJdEke4aul2HWHqQVDoF8PYt2b7/hrd2GyT+Fh9YTU7MKSx33AWkdeOO9JgtLn5I4FTY4N8feoer2zAmCjQJ6OAO/1Evsf8YwNQt0dQCX/wJIYNejxMUZ4c0Pm2uDFwnnkw06JewdTnrkEJIo8AyAKAO/uAyemQPml4Qff2+sDA4QRmDfqRVFlxLqD2CDuGM42dGUuBXgV/sNb+82XLoqbNtMXJn3FQ1s7CT+uCrsOdosBZZIPZuDnxqqPlEwrmlEvFIKD+grE7P/KEiyvgQsXAeWqsBXPzh88U1D8+XbXjC413Ipbpe8wy8b1rYSNSd88rWCrv1biRd6LDjj0hXhoy8zZ+g0gZN58prtBtoWSaczu313onhHO/ccrgUfkNwPud9C9N5utyuQ0eECHuhoVH1rBJgBSa1hNf/9PCm883EYjBA6Gk4w1EOB+ME9KelwdEW2cyF5LG+X/7EJ+fb5fSn+NW9Cnl0+oJa1LUk3xNzHjRJ3ewAMAPRNKhV4mXBnSRvLNA3BUel8NT438QGXO11Tejy8FCdb/tdGn/PvxdPU7K1bPaZhvabUa3mnx/QG79GWyt4SOFoAAAAASUVORK5CYII="},31659:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAvtJREFUSEu1VVtrFEkYPadmuhMJ2WhEmfUSxQSvCWqCgoKiv8AVjKj/QSGLwRcTBsGHXS8g/gfdNfuQt1189UEkqKAiKonrZV3jLTiGbDLdM3WkaqbbmdV4Q+upuqr61Pedc76viFlGb68yozm0MltsITgHWQalMgQpykBFlRoKHeOYGBpi+UMQfG8xL7NpCgtjxDljkZntYrduDcoBgvGRJjxHnrb2bB3w2rzChsmow0f4BUPQdLE5HL2dZ5T8lgI70DmFaJUMw2TTyqwg7E+g2QpoUWWdTyB7WTDDhvZ+CmQVTbeEdxPwCnBepmcyWimwyX8LgSX6CO4BYGYJ3qU+LOGUoYr+SmjqanN4z9HigTf1K1e28eIEVOQZAJs/k40RSodAxO58xgRPRk5wnDvyyr6eijsToQQeAdD7maDVWHTBAL8mgs5tCm5x40EtYBi3+UXHKfWbS//wLoM1SwhrgRkfS/1wqb6cFPK/ezNYifsSzhUFj9jdN9MBY1o8tcLPIA+4+bWTWTwrAC8KQmfb+65Mruk+XKpMpXMkTvu5tQX29BW7EicI5g9Ay93epeNZjI0LLwpA5zJi7KlgqjJKwI+twLwmYudgFRh8QFgnNmgVsac/6paFD0ngZQCBm/85kMV0Ufj7uc/E08Fq4OUy0J4DFs8ndgwkwIgJbfHABuKG/mhDjXAp8F8DWfw7Idx4KA9YS0bJAuuWEmuXENuOJlTgP1LbU+D1fcV1GcPGSsTvqLg4mMXjV8LNh4L5H8VW8MLWAgu8b2D3plR8TDzniH8mVBdtIlpuHhFkgFQ86DyBU6l4tXYDTbuk84ndutqIxrTA6+02EwFjz4RjFyp2I7kfsmM+c2e3b1EgAIYI/VJXIO7ju5S0TzAvs3EyWp22y69sQq59Xm8O76RNyGF3HFTDDw3RKojex5U6dSVudwPYCtA1qVjgU8JeIc1wwqk/TMVviuHd0bOsdroaTRx4cxi1f9NGn+J/j6ep1lAfekz9fkmx4/JTj+lbTjuJymLBep4AAAAASUVORK5CYII="},78888:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAupJREFUSEu1lctLVVEYxdfax3MsxIyikoqIlLQXlVKQ9PwPCrLXLKhJYGAkTRrcoElvoqBJ0KwiHfgnRBQSEk16aFhE9JCCyMzsnqN7xd7Xc7qm1x7UHu3nb397fY9NlGjNzQr6qjGLZfkqgtNRxnBkFIIUB1BeI+UDtf342N7O0ckQnDCZk1k3hLkJkmpjEZS62M1bg9EQYX93Bd4jR1u8dxx4eU5R+WBc6y38gyZoOF8Z9T3JMU6PZWAHnT4Q18kwShetzBLCbgdNE6D5hXm+gWyXYDoN7YsMZBUPV0W9KbwAzsk0DsZLBVb4sRBaopXgTgCmhPHu6Z0Szhkq76+Ehh5URs+cLB68rk3VozZZkEJFXgSw/jfV6KZ0GETi9gcmfNN9hv3cmlPZp6FkZeoogccANP8mdMwW3TLA6dShMyvCR1zbojmMkkV+0mlK3fz5+QtnE/NmAvkE+DIMvPygn++1EvekmisOX7Gh9VstjKny0gpHQO5z/Y3LiPmzCi7YtpK41yN8/QZsW1XoWwFvPwp3n45dIl0ncd4fsHaAja35VWkkCKYD0GK31n40QE31xDAvNrWvX9h1Ns0PviSsczZoFbOxLW6QhScI7AIQuv7xnQYb6gysJjzbsw2Jrl6Lkx1ZXiSENniwgbimLV5T5LgM3NxkULcA0Lh8+mEvDdDzGujoGtsgfCW1OQOvbs2vCAynFSz+IcXlAwGa6qeWwmndcrUghcAXBnZXJkUp513YH2DLiqnBtx8LR66lGusGgXOZ84rDDTQ1km44Ca8eCtCwZGrwg+fCwSsebEnuhexzb70Lt1IJktttsGmZQTJpUQTCALjzxOLELa9xO6FT4xLEDf5LSntNcjJrB+P6rFz+ZRFy5fNhZdSTFSHHrm1R+YzyuA6ij2P/LJ/idgeAJoCuSCUC3xH2Pmk6U039Zir5nI96+y5xrNIVpZKDV0ZxzT8t9Bn/f3xNxXVgss/Ur48ocVr+6jP9Do/KfcqAJBJ7AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=867.36f4e577.js.map