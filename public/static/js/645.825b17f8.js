"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[645],{83645:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"main-info"},[e("ct-section-title",{staticClass:"main-info-title",attrs:{title:t.$t("corpInfo.corpBasicInfo")}}),e("el-row",{attrs:{gutter:20}},t._l(t.infoList,(function(a){return e("el-col",{key:a.prop,attrs:{span:4}},[e("CtTooltip",{attrs:{label:a.label,content:t.itemInfoFormatter(a)}})],1)})),1),e("ParamInfo")],1)])},o=[],s=a(63822),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-container"},[e("ct-section-title",{staticClass:"section-title",attrs:{title:t.$t("corpInfo.paramInfo")}},[e("template",{slot:"rightContent"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.modify(null)}}},[t._v(t._s(t.$t("corpInfo.create")))])],1)],2),e("el-table",{ref:"table",attrs:{data:t.tableData,border:!0,height:"100%",loading:t.loading}},[e("el-table-column",{attrs:{prop:"paramName",label:t.$t("corpInfo.paramName"),"show-overflow-tooltip":"",resizable:""}}),e("el-table-column",{attrs:{prop:"createTime",label:t.$t("corpInfo.operationTime"),"show-overflow-tooltip":"",resizable:""}}),e("el-table-column",{attrs:{prop:"paramValue",label:t.$t("corpInfo.paramInfo"),"show-overflow-tooltip":"",resizable:""}}),e("el-table-column",{attrs:{label:t.$t("rule.operate"),fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"action-button-group"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.modify(a.row)}}},[t._v(t._s(t.$t("rule.modify")))]),e("el-button",{staticClass:"cor-red",attrs:{type:"text"},on:{click:function(e){return t.del(a.row.paramId)}}},[t._v(t._s(t.$t("rule.delete")))])],1)]}}])})],1),e("AddEditDialog",{attrs:{visible:t.addEditDialogVisible,"modify-form":t.modifyForm},on:{"update:visible":function(e){t.addEditDialogVisible=e},modifyParam:function(e){return t.getParamValueByCust()}}})],1)},i=[],n=a(88434),m=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:t.modifyTitle,visible:t.v,"before-close":t.handleClose,width:"520px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.v=e}}},[e("el-form",{ref:"paramFormRef",staticClass:"demo-ruleForm",attrs:{model:t.paramForm,rules:t.paramRules,size:"small"}},[e("el-form-item",{attrs:{label:t.$t("corpInfo.pleaseSelectParam"),prop:"mobile"}},[e("ct-select",{attrs:{placeholder:t.$t("corpInfo.pleaseSelectParam"),options:t.operaOptions,filterable:""},model:{value:t.paramForm.paramCode,callback:function(e){t.$set(t.paramForm,"paramCode",e)},expression:"paramForm.paramCode"}})],1),"SMS_WEBHOOK_PUSH_URL"===t.paramForm.paramCode?e("el-form-item",{attrs:{prop:"paramValue",label:t.$t("corpInfo.upSmsPushAddress")}},[e("el-input",{attrs:{placeholder:t.inputPh("corpInfo.upSmsPushAddress"),maxlength:"1000"},model:{value:t.paramForm.paramValue,callback:function(e){t.$set(t.paramForm,"paramValue",e)},expression:"paramForm.paramValue"}})],1):t._e()],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clickOk}},[t._v(t._s(t.$t("common.ok")))]),e("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))])],1)],1)],1)},c=[],p=a(23060),u={mixins:[p.Z],props:{visible:{type:Boolean,default:!1},modifyForm:{type:Object,default:()=>null}},data(){return{paramForm:{paramCode:""},paramRules:{paramValue:[{required:!0,message:this.inputPh("corpInfo.upSmsPushAddress"),trigger:"blur"}]},operaOptions:[{label:this.$t("corpInfo.upSmsPushAddress"),value:"SMS_WEBHOOK_PUSH_URL"}]}},computed:{...(0,s.rn)("user",["user"]),modifyTitle(){return this.$t("common.tip")},v:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible(t){t&&(this.modifyForm?this.paramForm={...this.modifyForm}:this.paramForm={})}},methods:{clickOk(){this.$refs.paramFormRef.validate((async t=>{if(!t)return;let e={paramCode:"SMS_WEBHOOK_PUSH_URL",corpId:this.user.custId,parentUserId:this.user.userId};this.modifyForm||(e={...e,statusCd:1e3,paramType:1,paramName:"上行短信推送地址"});const a="param/saveCmpParam";await(0,n.Z)(a,{...e,...this.paramForm},{method:"post"}),this.$refs.paramFormRef.clearValidate();const r=this.modifyForm?this.$t("common.editSuccess"):this.$t("common.createSuccess");this.$message.success(r),this.v=!1,this.$emit("modifyParam")}))},cancel(){this.v=!1,this.$refs.paramFormRef.clearValidate()},handleClose(){this.cancel()},validatePhone(t,e,a){this.paramForm.areaCode||a(new Error(this.$t("accountMag.selectAreaCode"))),/^\d{1,15}$/.test(e)||a(new Error(this.$t("accountMag.correctMobile"))),a()}}},d=u,f=a(1001),h=(0,f.Z)(d,m,c,!1,null,"e29009ea",null),b=h.exports,y={components:{AddEditDialog:b},props:{selectPackageList:{type:Array,required:!0,default:()=>[]}},data(){return{loading:!1,tableData:[],addEditDialogVisible:!1,modifyForm:null}},computed:{...(0,s.rn)("user",["user"])},mounted(){this.getParamValueByCust()},methods:{async getParamValueByCust(){const t={paramCode:"SMS_WEBHOOK_PUSH_URL",custId:this.user.custId};this.loading=!0,(0,n.Z)("param/getParamValueByCust",t,{method:"get"}).then((t=>{this.tableData=t?[t]:[]})).finally((()=>{this.loading=!1}))},async modify(t){this.addEditDialogVisible=!0,this.modifyForm=t},async del(t){this.$confirm(`${this.$t("corpInfo.deletePushAddress")}？`,this.$t("common.tip"),{confirmButtonText:this.$t("rule.delete"),cancelButtonText:this.$t("rule.cancellation"),type:"success"}).then((async()=>{(0,n.Z)("param/deleteParamById",{paramId:t},{method:"get"}).then((()=>{this.$message.success(this.$t("rule.delectSuccess")),this.getParamValueByCust()}))})).catch((()=>{}))}}},$=y,v=(0,f.Z)($,l,i,!1,null,"39ea1e48",null),g=v.exports,I={components:{ParamInfo:g},data(){return{addEditDialogVisible:!1,modifyType:""}},computed:{...(0,s.rn)("user",["user"]),infoList(){return[{label:this.$t("corpInfo.corpName"),prop:"offerName",formatter:()=>this.user.custName},{label:this.$t("corpInfo.corpId"),prop:"offerNbr",formatter:()=>this.user.custId}]}},methods:{itemInfoFormatter(t){const e=t.formatter?t.formatter():"-";return e}}},_=I,C=(0,f.Z)(_,r,o,!1,null,"0f5d3007",null),F=C.exports}}]);
//# sourceMappingURL=645.825b17f8.js.map