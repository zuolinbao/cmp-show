"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[50],{49050:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"container-form"},[t("el-form",{ref:"qryParamRef",attrs:{model:e.qryParam,size:"small"}},[t("div",{staticClass:"row-container"},[t("div",{staticClass:"left-row"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.strategyId"),prop:"strategyId"}},[t("el-input",{attrs:{placeholder:e.inputPh("strategyMag.strategyId")},on:{input:t=>e.qryParam.strategyId=t.replace(/\D/g,"")},model:{value:e.qryParam.strategyId,callback:function(t){e.$set(e.qryParam,"strategyId",t)},expression:"qryParam.strategyId"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.strategyName"),prop:"strategyName"}},[t("el-input",{attrs:{placeholder:e.inputPh("strategyMag.strategyName")},model:{value:e.qryParam.strategyName,callback:function(t){e.$set(e.qryParam,"strategyName",t)},expression:"qryParam.strategyName"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.equipmentSupplierId"),prop:"equipmentSupplierId"}},[t("ct-select",{attrs:{placeholder:e.selectPh("strategyMag.equipmentSupplierId"),options:e.equipmentSupplierIdOptions,labelKey:"equipmentSupplierName",valueKey:"equipmentSupplierId"},model:{value:e.qryParam.equipmentSupplierId,callback:function(t){e.$set(e.qryParam,"equipmentSupplierId",t)},expression:"qryParam.equipmentSupplierId"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.powerSearch,expression:"powerSearch"}],staticClass:"more-query-group"},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.custId"),prop:"custId"}},[t("ct-select",{attrs:{placeholder:e.selectPh("strategyMag.custId"),options:e.custOptions},model:{value:e.qryParam.custId,callback:function(t){e.$set(e.qryParam,"custId",t)},expression:"qryParam.custId"}})],1)],1)],1)],1)],1),t("div",{staticClass:"right-row"},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{"label-width":"0"}},[t("div",{staticClass:"search-button-group"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.querySimCardListForPage(!1)}}},[e._v(e._s(e.$t("strategyMag.query"))+" ")]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.reset}},[e._v(e._s(e.$t("strategyMag.resetting")))]),t("show-more-button",{model:{value:e.powerSearch,callback:function(t){e.powerSearch=t},expression:"powerSearch"}})],1)])],1)],1)]),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v(" "+e._s(e.$t("strategyMag.add"))+" ")])],1),t("el-form-item",{attrs:{"label-width":"0"}})],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{height:"100%",width:"100%","element-loading-text":e.$t("strategyMag.loading"),data:e.tableData,border:!0}},[t("el-table-column",{attrs:{prop:"strategyId",label:e.$t("strategyMag.strategyId"),"show-overflow-tooltip":"",resizable:"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"equipmentSupplierIdDesc",label:e.$t("strategyMag.equipmentSupplierId"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"strategyName",label:e.$t("strategyMag.strategyName"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"checkCardModeDesc",label:e.$t("strategyMag.checkCardModeDesc"),"show-overflow-tooltip":"","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.OnAndOff(t.row.checkCardMode))+" ")]}}])}),t("el-table-column",{attrs:{prop:"heartBeatInterval",label:e.$t("strategyMag.heartBeatInterval"),"show-overflow-tooltip":"","min-width":"150"}}),t("el-table-column",{attrs:{prop:"weakSignalValue",label:e.$t("strategyMag.weakSignalValue"),"show-overflow-tooltip":"","min-width":"150"}}),t("el-table-column",{attrs:{prop:"networkSwitchDesc",label:e.$t("strategyMag.networkSwitchDesc"),"show-overflow-tooltip":"","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.OnAndOff(t.row.networkSwitch))+" ")]}}])}),t("el-table-column",{attrs:{prop:"bestSignalStatusDesc",label:e.$t("strategyMag.bestSignalStatusDesc"),"show-overflow-tooltip":"","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.OnAndOff(t.row.bestSignalStatus))+" ")]}}])}),t("el-table-column",{attrs:{prop:"priorityNetworkSwitchDesc",label:e.$t("strategyMag.priorityNetworkSwitchDesc"),"show-overflow-tooltip":"","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.OnAndOff(t.row.priorityNetworkSwitch))+" ")]}}])}),t("el-table-column",{attrs:{prop:"falseSignalIps",label:e.$t("strategyMag.falseSignalIps"),"show-overflow-tooltip":"","min-width":"140"}}),t("el-table-column",{attrs:{prop:"falseSignalInterval",label:e.$t("strategyMag.falseSignalInterval"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{label:e.$t("strategyMag.operate"),fixed:"right","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("div",{staticClass:"action-button-group"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.update(a)}}},[e._v(e._s(e.$t("strategyMag.update")))])],1)]}}])})],1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],attrs:{background:"","current-page":e.page.pageIndex,align:"right","page-sizes":[10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("AddDialog",{attrs:{visible:e.form.visible,form:e.form,custOptions:e.custOptions},on:{"update:visible":function(t){return e.$set(e.form,"visible",t)},query:e.querySimCardListForPage}})],1)},l=[],s=(a(70560),a(45101),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.v,"before-close":e.handleClose,width:"900px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.v=t},open:e.open}},[t("el-form",{ref:"paramFormRef",staticClass:"demo-ruleForm",attrs:{model:e.paramForm,rules:e.paramRules,"label-width":"246px",size:"small"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{key:e.key,attrs:{label:e.$t("strategyMag.strategyName"),prop:"strategyName"}},[t("el-input",{attrs:{placeholder:e.inputPh("strategyMag.strategyName"),disabled:"update"===e.form.opt},model:{value:e.paramForm.strategyName,callback:function(t){e.$set(e.paramForm,"strategyName",t)},expression:"paramForm.strategyName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{key:e.key,attrs:{label:e.$t("strategyMag.equipmentSupplierId"),prop:"equipmentSupplierId"}},[t("ct-select",{attrs:{disabled:"update"===e.form.opt,placeholder:e.selectPh("strategyMag.equipmentSupplierId"),options:e.equipmentSupplierIdOptions,labelKey:"equipmentSupplierName",valueKey:"equipmentSupplierId"},model:{value:e.paramForm.equipmentSupplierId,callback:function(t){e.$set(e.paramForm,"equipmentSupplierId",t)},expression:"paramForm.equipmentSupplierId"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{key:e.key,attrs:{label:e.$t("strategyMag.custId"),prop:"custId"}},[t("ct-select",{attrs:{disabled:"update"===e.form.opt,placeholder:e.selectPh("strategyMag.custId"),options:e.custOptions},model:{value:e.paramForm.custId,callback:function(t){e.$set(e.paramForm,"custId",t)},expression:"paramForm.custId"}})],1)],1),t("el-col",{staticStyle:{visibility:"hidden"},attrs:{span:12}},[t("el-form-item",{attrs:{label:""}},[t("el-input")],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.heartbeatReportingFrequency"),prop:"heartBeatSwitch"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"心跳上报频率30秒到86400秒，仅作为上报，连续两次上报未收到可表示下线":"The heartbeat report frequency ranges from 30 seconds to 86400 seconds. If the heartbeat report is not received twice, it indicates that the heartbeat is offline",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.heartBeatSwitch,callback:function(t){e.$set(e.paramForm,"heartBeatSwitch",t)},expression:"paramForm.heartBeatSwitch"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.heartBeatSwitch,callback:function(t){e.$set(e.paramForm,"heartBeatSwitch",t)},expression:"paramForm.heartBeatSwitch"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:`${e.$t("strategyMag.heartBeatIntervalDialog")}(s)`,prop:"heartBeatInterval"}},[t("el-input",{attrs:{type:"number",disabled:"0"===e.paramForm.heartBeatSwitch,placeholder:e.inputPh("strategyMag.heartBeatIntervalDialog")},model:{value:e.paramForm.heartBeatInterval,callback:function(t){e.$set(e.paramForm,"heartBeatInterval",t)},expression:"paramForm.heartBeatInterval"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.priorityNetworkSwitch"),prop:"priorityNetworkSwitch"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"设置设备上电时的默认运营商":"Set the default carrier for powering on the device",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.priorityNetworkSwitch,callback:function(t){e.$set(e.paramForm,"priorityNetworkSwitch",t)},expression:"paramForm.priorityNetworkSwitch"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.priorityNetworkSwitch,callback:function(t){e.$set(e.paramForm,"priorityNetworkSwitch",t)},expression:"paramForm.priorityNetworkSwitch"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.priorityNetwork"),prop:"priorityNetwork"}},[t("ct-select",{attrs:{placeholder:e.inputPh("strategyMag.priorityNetwork"),options:e.priorityNetworkOptions,disabled:"0"===e.paramForm.priorityNetworkSwitch},model:{value:e.paramForm.priorityNetwork,callback:function(t){e.$set(e.paramForm,"priorityNetwork",t)},expression:"paramForm.priorityNetwork"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.autoCardCut"),prop:"checkCardMode"}},[t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.checkCardMode,callback:function(t){e.$set(e.paramForm,"checkCardMode",t)},expression:"paramForm.checkCardMode"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.checkCardMode,callback:function(t){e.$set(e.paramForm,"checkCardMode",t)},expression:"paramForm.checkCardMode"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:""}},[e._v("     ")])],1),"1"===e.paramForm.checkCardMode?[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.weakSignalSwitch"),prop:"weakSignalSwitch"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"当前信号值低于某值时切换":"Switch when the current signal value is below a certain value",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.weakSignalSwitch,callback:function(t){e.$set(e.paramForm,"weakSignalSwitch",t)},expression:"paramForm.weakSignalSwitch"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.weakSignalSwitch,callback:function(t){e.$set(e.paramForm,"weakSignalSwitch",t)},expression:"paramForm.weakSignalSwitch"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:`${e.$t("strategyMag.weakSignalValueDialog")}(-dBm)`,prop:"weakSignalValue"}},[t("el-input",{attrs:{type:"number",disabled:"0"===e.paramForm.weakSignalSwitch,placeholder:e.inputPh("strategyMag.weakSignalValueDialog")},model:{value:e.paramForm.weakSignalValue,callback:function(t){e.$set(e.paramForm,"weakSignalValue",t)},expression:"paramForm.weakSignalValue"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.networkSwitch"),prop:"networkSwitch"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"2G切换；3G切换":"2Gswitching；3Gswitching",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.networkSwitch,callback:function(t){e.$set(e.paramForm,"networkSwitch",t)},expression:"paramForm.networkSwitch"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.networkSwitch,callback:function(t){e.$set(e.paramForm,"networkSwitch",t)},expression:"paramForm.networkSwitch"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.networkType"),prop:"networkType"}},[t("ct-select",{attrs:{placeholder:e.inputPh("strategyMag.networkType"),options:e.networkTypeOptions,disabled:"0"===e.paramForm.networkSwitch},model:{value:e.paramForm.networkType,callback:function(t){e.$set(e.paramForm,"networkType",t)},expression:"paramForm.networkType"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.bestSignalStatus"),prop:"bestSignalStatus"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"全能卡在每次上电时，会先监测所有运营商连接质量，选取最优连接，需要一定初始化时间":"Each time the universal card is powered on, it monitors the connection quality of all carriers and selects the optimal connection, which requires a certain initialization time",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.bestSignalStatus,callback:function(t){e.$set(e.paramForm,"bestSignalStatus",t)},expression:"paramForm.bestSignalStatus"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.bestSignalStatus,callback:function(t){e.$set(e.paramForm,"bestSignalStatus",t)},expression:"paramForm.bestSignalStatus"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:""}},[e._v("     ")])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"tip-box",attrs:{label:e.$t("strategyMag.falseSignalSwitch"),prop:"falseSignalSwitch"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"zh"===e.$i18n.locale?"检测网址/IP，可配置两个或一个，如果2个(以英文逗号隔开)，都不通则触发切换，如果是1个，需要连续两次不通才触发切换，检测间隔一到，上述检测都应连续进行检测间隔":"If two urls /IP addresses (separated by commas (,)) are not common, switchover is triggered. If two urls /IP addresses are not common, switchover is triggered only when two urls /IP addresses are not common. If two urls /IP addresses are not common, the detection interval is once",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),t("span",{staticClass:"radio-box"},[t("el-radio",{attrs:{label:"1"},model:{value:e.paramForm.falseSignalSwitch,callback:function(t){e.$set(e.paramForm,"falseSignalSwitch",t)},expression:"paramForm.falseSignalSwitch"}},[e._v(e._s(e.$t("strategyMag.on")))]),t("el-radio",{attrs:{label:"0"},model:{value:e.paramForm.falseSignalSwitch,callback:function(t){e.$set(e.paramForm,"falseSignalSwitch",t)},expression:"paramForm.falseSignalSwitch"}},[e._v(e._s(e.$t("strategyMag.off")))])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("strategyMag.falseSignalIpsDialog"),prop:"falseSignalIps"}},[t("el-input",{attrs:{disabled:"0"===e.paramForm.falseSignalSwitch,placeholder:e.inputPh("strategyMag.falseSignalIpsDialog")},model:{value:e.paramForm.falseSignalIps,callback:function(t){e.$set(e.paramForm,"falseSignalIps",t)},expression:"paramForm.falseSignalIps"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:`${e.$t("strategyMag.falseSignalIntervalDialog")}(s)`,prop:"falseSignalInterval"}},[t("el-input",{attrs:{disabled:"0"===e.paramForm.falseSignalSwitch,placeholder:e.inputPh("strategyMag.falseSignalIntervalDialog")},model:{value:e.paramForm.falseSignalInterval,callback:function(t){e.$set(e.paramForm,"falseSignalInterval",t)},expression:"paramForm.falseSignalInterval"}})],1)],1)]:e._e()],2)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("strategyMag.cancel")))])],1)],1)}),i=[],o=a(90408),n=a(41090),p={mixins:[n.Z],props:{visible:{type:Boolean,default:!1},form:{type:Object,default:()=>({opt:"add",data:{}})},custOptions:{type:Array,default(){return[]}}},data(){return{title:"",defaultParamForm:{strategyName:"",equipmentSupplierId:"",custId:"",heartBeatSwitch:"1",heartBeatInterval:null,checkCardMode:"1",weakSignalSwitch:"1",weakSignalValue:null,networkSwitch:"1",networkType:"",bestSignalStatus:"1",priorityNetworkSwitch:"1",priorityNetwork:"",falseSignalSwitch:"1",falseSignalIps:"",falseSignalInterval:null},paramForm:{},equipmentSupplierIdOptions:[],networkTypeOptions:[{label:"2G",value:"1"},{label:"3G",value:"2"},{label:"2/3G",value:"3"}],zhPriorityNetworkOptions:[{label:"中国电信",value:"1"},{label:"中国移动",value:"2"},{label:"中国联通",value:"3"}],enPriorityNetworkOptions:[{label:"China Telecom",value:"1"},{label:"China Mobile",value:"2"},{label:"China Unicom",value:"3"}],loading:!1,paramRules:{strategyName:[{required:!0,message:this.inputPh("strategyMag.strategyName"),trigger:"blur"},{validator:this.validatestrategyName,trigger:"blur"}],equipmentSupplierId:[{required:!0,message:this.inputPh("strategyMag.equipmentSupplierId"),trigger:"change"}],custId:[{required:!0,message:this.inputPh("strategyMag.custId"),trigger:"change"}]},key:0}},computed:{...(0,o.Se)("user",["userInfo"]),priorityNetworkOptions(){return"zh"===this.$i18n.locale?this.zhPriorityNetworkOptions:this.enPriorityNetworkOptions},v:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},created(){this.queryEquipmentSupplierId()},methods:{open(){if(this.key++,this.paramForm=JSON.parse(JSON.stringify(this.defaultParamForm)),"add"===this.form.opt&&(this.title=this.$t("strategyMag.add")),"update"===this.form.opt&&(this.title=this.$t("strategyMag.update"),this.form.data.strategyId)){for(let e in this.paramForm)this.paramForm[e]=this.form.data[e];this.paramForm.strategyId=this.form.data.strategyId,this.paramForm.weakSignalValue&&(this.paramForm.weakSignalValue*=-1)}},queryEquipmentSupplierId(){this.$api.fullStrategyMag.queryEquipmentSupplierId().then((e=>{this.equipmentSupplierIdOptions=e}))},clickOk(){if("1"===this.paramForm.heartBeatSwitch){if(!this.paramForm.heartBeatInterval)return void("zh"===this.$i18n.locale?this.$message.error("心跳上报频率开启时心跳上报间隔必填"):this.$message.error("Heartbeat Report frequency Heartbeat report interval When enabled This parameter is mandatory"));if(this.paramForm.heartBeatInterval<30||this.paramForm.heartBeatInterval>86400)return void("zh"===this.$i18n.locale?this.$message.error("心跳上报间隔必须在30至86400秒之间"):this.$message.error("Heartbeat reporting intervals must be between 30 and 86400 seconds"))}else if(this.paramForm.heartBeatInterval&&(this.paramForm.heartBeatInterval<30||this.paramForm.heartBeatInterval>86400))return void("zh"===this.$i18n.locale?this.$message.error("心跳上报间隔必须在30至86400秒之间"):this.$message.error("Heartbeat reporting intervals must be between 30 and 86400 seconds"));if("1"===this.paramForm.weakSignalSwitch){if(!this.paramForm.weakSignalValue)return void("zh"===this.$i18n.locale?this.$message.error("弱信号切换策略开启时弱信号阈值必填"):this.$message.error("The weak-signal threshold is mandatory when the weak-signal switching policy is enabled"));if(this.paramForm.weakSignalValue<70||this.paramForm.weakSignalValue>113)return void("zh"===this.$i18n.locale?this.$message.error("弱信号阈值范围-113至-70dBm"):this.$message.error("The weak signal threshold ranges from -113 to -70 DBM"))}else if(this.paramForm.weakSignalValue&&(this.paramForm.weakSignalValue<70||this.paramForm.weakSignalValue>113))return void("zh"===this.$i18n.locale?this.$message.error("弱信号阈值范围-113至-70dBm"):this.$message.error("The weak signal threshold ranges from -113 to -70 DBM"));if("1"!==this.paramForm.networkSwitch||this.paramForm.networkType)if("1"!==this.paramForm.priorityNetworkSwitch||this.paramForm.priorityNetwork){if("1"===this.paramForm.falseSignalSwitch){if(!this.paramForm.falseSignalIps)return void("zh"===this.$i18n.locale?this.$message.error("假信号切换策略开启时指定检测网址/IP必填"):this.$message.error("This parameter is mandatory when the false signal switchover policy is enabled"));if(!this.paramForm.falseSignalInterval)return void("zh"===this.$i18n.locale?this.$message.error("假信号切换策略开启时检测间隔必填"):this.$message.error("The detection interval is mandatory when the false signal switching policy is enabled"));if(this.paramForm.falseSignalInterval<=0)return void("zh"===this.$i18n.locale?this.$message.error("检测间隔大于0"):this.$message.error("The detection interval is greater than 0"))}else if(this.paramForm.falseSignalInterval&&this.paramForm.falseSignalInterval<=0)return void("zh"===this.$i18n.locale?this.$message.error("检测间隔大于0"):this.$message.error("The detection interval is greater than 0"));!this.paramForm.createStaff&&(this.paramForm.createStaff=this.userInfo.userId),!this.paramForm.updateStaff&&(this.paramForm.updateStaff=this.userInfo.userId),this.paramForm.weakSignalValue>0&&(this.paramForm.weakSignalValue*=-1),this.$refs.paramFormRef.validate((e=>{e&&(this.loading=!0,this.$api.fullStrategyMag["add"===this.form.opt?"saveStrategy":"editStrategy"](this.paramForm).then((e=>{this.$refs.paramFormRef.resetFields(),this.$message.success(("add"===this.form.opt?"新增":"修改")+"策略成功！"),this.v=!1,this.loading=!1,this.$emit("query",!0)})).catch((e=>{this.loading=!1,this.paramForm.weakSignalValue<0&&(this.paramForm.weakSignalValue*=-1)})))}))}else"zh"===this.$i18n.locale?this.$message.error("优先卡配置策略开启时选择优先使用运营商必填"):this.$message.error("Priority Card configuration policy Select Priority Carrier This parameter is mandatory");else"zh"===this.$i18n.locale?this.$message.error("网络制式切换策略开启时选择网络制式必填"):this.$message.error("This parameter is mandatory when selecting a network Mode switchover policy is enabled")},cancel(){this.v=!1},handleClose(){this.cancel()},validatestrategyName(e,t,a){const r=/^[\u4e00-\u9fa5A-Za-z@#$%^&*]+$/,l=/^.{1,20}$/;r.test(t)?l.test(t)?a():"zh"===this.$i18n.locale?a(new Error("策略名称不能超过20个字")):a(new Error("The policy name cannot exceed 20 characters")):"zh"===this.$i18n.locale?a(new Error("策略名称只支持中文、大写字母、小写字母和特殊字符@、#、$、%、^、&、*")):a(new Error("The policy name can contain only lowercase and uppercase letters, and special characters such as @, #, $, %, ^, &, and *"))}},watch:{"paramForm.heartBeatSwitch":{handler(e){"0"===e&&(this.paramForm.heartBeatInterval=null)}},"paramForm.priorityNetworkSwitch":{handler(e){"0"===e&&(this.paramForm.priorityNetwork="")}},"paramForm.weakSignalSwitch":{handler(e){"0"===e&&(this.paramForm.weakSignalValue=null)}},"paramForm.networkSwitch":{handler(e){"0"===e&&(this.paramForm.networkType="")}},"paramForm.falseSignalSwitch":{handler(e){"0"===e&&(this.paramForm.falseSignalIps="",this.paramForm.falseSignalInterval=null)}}}},m=p,c=a(43736),h=(0,c.Z)(m,s,i,!1,null,"67f0cca6",null),u=h.exports;const g={strategyId:"",strategyName:"",equipmentSupplierId:"",custId:""};var d={components:{AddDialog:u},mixins:[n.Z],data(){return{powerSearch:!1,loading:!1,form:{visible:!1,opt:"",data:{}},page:{pageIndex:1,pageSize:10,total:0},tableData:[],qryParam:{...g},equipmentSupplierIdOptions:[],zhCustOptions:[{label:"中国电信",value:"1",children:[{label:"北京电信",value:"1-1"},{label:"南京电信",value:"1-2"}]},{label:"中国移动",value:"2",children:[{label:"上海移动",value:"2-1"},{label:"武汉移动",value:"2-2"},{label:"天津移动",value:"2-3"}]},{label:"中国联通",value:"3",children:[{label:"南昌联通",value:"3-1"},{label:"长沙联通",value:"3-2"}]}],enCustOptions:[{label:"China Telecom",value:"1",children:[{label:"Beijing Telecom",value:"1-1"},{label:"Nanjing Telecom",value:"1-2"}]},{label:"China Mobile",value:"2",children:[{label:"Shanghai Mobile",value:"2-1"},{label:"Wuhan Mobile",value:"2-2"},{label:"Tianjin Mobile",value:"2-3"}]},{label:"China Unicom",value:"3",children:[{label:"Nanchang Unicom",value:"3-1"},{label:"Changsha Unicom",value:"3-2"}]}]}},created(){this.queryEquipmentSupplierId(),this.querySimCardListForPage(!1)},computed:{custOptions(){return[{label:"上海农机",value:"1"},{label:"贵州人保",value:"2"},{label:"南网科技",value:"3"}]},OnAndOff(){return e=>"0"===e?"zh"===this.$i18n.locale?"关闭":"Off":"1"===e?"zh"===this.$i18n.locale?"开启":"On":"-"}},methods:{queryEquipmentSupplierId(){this.$api.fullStrategyMag.queryEquipmentSupplierId().then((e=>{this.equipmentSupplierIdOptions=e}))},async querySimCardListForPage(e=!1){e||(this.page.pageIndex=1,this.page.pageSize=10);const t={...this.qryParam,...this.page};this.loading=!0,this.$api.fullStrategyMag.queryStrategyPage(t).then((e=>{this.tableData=e.list||[],this.page.total=e.total})).finally((()=>{this.loading=!1}))},add(){this.form.visible=!0,this.form.opt="add"},update(e){this.form.visible=!0,this.form.opt="update",this.form.data=e},del(e){this.$confirm("请确认是否删除此策略，策略删除否不可恢复","删除策略",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$api.fullStrategyMag.deleteStrategy({strategyId:e.strategyId,custId:e.custId,equipmentSupplierId:e.equipmentSupplierId,strategyName:e.strategyName}).then((e=>{this.$message({type:"success",message:"删除成功!"}),this.querySimCardListForPage(!1)}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleSizeChange(e){this.page.pageSize=e,this.page.pageIndex=1,this.querySimCardListForPage(!0)},handleCurrentChange(e){this.page.pageIndex=e,this.querySimCardListForPage(!0)},reset(){this.qryParam={...g},this.querySimCardListForPage(!1)},exportTable(){const e={...this.qryParam,...this.page};this.$api.fullStrategyMag.batchExportStrategy(e).then((e=>{const t=this,a=this.$createElement;this.$msgbox({title:"操作成功",type:"success",center:!0,message:a("p",{class:"fs12"},["文件下载任务已生成，请到下载任务页面",a("a",{class:"cor-blue",on:{click:t.viewProgress}},"查看任务进度")]),showCancelButton:!1,confirmButtonText:"知道了"}).then((()=>{})).catch((()=>{}))}))},viewProgress(){this.$msgbox.close(),this.$router.push("/userMag/download")}}},f=d,w=(0,c.Z)(f,r,l,!1,null,"03dc54c6",null),y=w.exports}}]);
//# sourceMappingURL=50.d95d045c.js.map