"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[378],{39378:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"container-form"},[t("el-form",{ref:"qryParamRef",attrs:{model:e.qryParam,size:"small"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:e.$t("roleMag.roleCode"),prop:"roleCode"}},[t("el-input",{attrs:{placeholder:e.inputPh("roleMag.roleCode")},model:{value:e.qryParam.roleCode,callback:function(t){e.$set(e.qryParam,"roleCode",t)},expression:"qryParam.roleCode"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:e.$t("roleMag.roleName"),prop:"roleName"}},[t("el-input",{attrs:{placeholder:e.inputPh("roleMag.roleName")},model:{value:e.qryParam.roleName,callback:function(t){e.$set(e.qryParam,"roleName",t)},expression:"qryParam.roleName"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:e.$t("roleMag.qryTime"),prop:"createTimeBegin"}},[t("ct-date-picker",{attrs:{begin:e.qryParam.createTimeBegin,end:e.qryParam.createTimeEnd},on:{"update:begin":function(t){return e.$set(e.qryParam,"createTimeBegin",t)},"update:end":function(t){return e.$set(e.qryParam,"createTimeEnd",t)}}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{"label-width":"0"}},[t("div",{staticClass:"search-button-group"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.qryCmpParamPage(!1)}}},[e._v(e._s(e.$t("common.query")))]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.reset}},[e._v(e._s(e.$t("common.reset")))])],1)])],1)],1),t("div",{directives:[{name:"compPriv",rawName:"v-compPriv",value:36,expression:"36"}],staticClass:"tool-button-group"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v(e._s(e.$t("roleMag.createBtn")))])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"container-table",attrs:{data:e.tableData,border:!0,height:"100%"}},[t("el-table-column",{attrs:{prop:"roleCode",label:e.$t("roleMag.roleCode"),"show-overflow-tooltip":"","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{staticClass:"cor-blue",on:{click:function(t){return e.toDetail(a.row.roleId)}}},[e._v(e._s(a.row.roleCode))])]}}])}),t("el-table-column",{attrs:{prop:"roleName",label:e.$t("roleMag.roleName"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"createStaffName",label:e.$t("roleMag.createStaffName"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"createTime",label:e.$t("roleMag.createTime"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{prop:"remark",label:e.$t("roleMag.remark"),"show-overflow-tooltip":"","min-width":"110"}}),t("el-table-column",{attrs:{label:e.$t("common.action"),fixed:"right","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"action-button-group"},[t("el-button",{directives:[{name:"compPriv",rawName:"v-compPriv",value:37,expression:"37"}],attrs:{disabled:1===a.row.roleLevel,type:"text"},on:{click:function(t){return e.modify(a.row.roleId)}}},[e._v(e._s(e.$t("common.edit")))]),t("el-button",{directives:[{name:"compPriv",rawName:"v-compPriv",value:38,expression:"38"}],staticClass:"cor-red",attrs:{disabled:1===a.row.roleLevel,type:"text"},on:{click:function(t){return e.deleteRole(a.row.roleId)}}},[e._v(e._s(e.$t("common.delete")))])],1)]}}])})],1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],attrs:{background:"","current-page":e.page.pageIndex,align:"right","page-sizes":[10,20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},o=[],l=(a(70560),a(41090)),i=a(90408);function n(e,t){const a=e.find((e=>e.value===t));return a?.label??""}var s=a(45101),m={mixins:[l.Z],data(){return{powerSearch:!1,loading:!1,page:{pageIndex:1,pageSize:10,total:0},channelIdOptions:[],tableData:[],statusCd:"1000",qryParam:{roleCode:"",roleName:""},saleList:[],modifyForm:{},pickerOptions:{disabledDate(e){return e.getTime()<Date.now()-2592e6||e.getTime()>Date.now()}}}},computed:{...(0,i.Se)("user",["userRoleType"])},mounted(){this.qryCmpParamPage(!1)},methods:{async qryCmpParamPage(e){e||(this.page.pageIndex=1,this.page.pageSize=10);const t={...this.qryParam,...this.page};this.loading=!0;const a=await(0,s.Z)("/role/queryRolePage",t,{method:"post"}).finally((()=>{this.loading=!1}));this.tableData=a.list,this.page.total=a.total},toDetail(e){this.$router.push({name:"modifyRole",query:{roleId:e,readOnly:!0}})},handleSizeChange(e){this.page.pageSize=e,this.page.pageIndex=1,this.qryCmpParamPage(!0)},handleCurrentChange(e){this.page.pageIndex=e,this.qryCmpParamPage(!0)},add(){this.$router.push({name:"createRole"})},modify(e){this.$router.push({name:"modifyRole",query:{roleId:e}})},getLabel(e,t){return n(e,t)},modifyParam(e){e&&(this.modifyForm=null,this.qryCmpParamPage(!1))},deleteRole(e){this.$confirm(this.$t("roleMag.deleteAsk"),{confirmButtonText:this.$t("common.yes"),cancelButtonText:this.$t("common.no"),type:"warning"}).then((()=>{this.loading=!0,(0,s.Z)("/role/removeRole",{roleId:e},{method:"get"}).then((e=>{this.$message({type:"success",message:this.$t("common.deleteSuccess")}),this.qryCmpParamPage(!1)})).finally((()=>{this.loading=!1}))})).catch((()=>{}))},reset(){this.$refs.qryParamRef.resetFields(),this.qryCmpParamPage(!1)}}},c=m,p=a(43736),d=(0,p.Z)(c,r,o,!1,null,"ed5017ce",null),u=d.exports}}]);
//# sourceMappingURL=378.87ed80c3.js.map