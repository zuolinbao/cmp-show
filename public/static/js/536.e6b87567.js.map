{"version":3,"file":"static/js/536.e6b87567.js","mappings":"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","sources":["webpack://cmp/./src/components/BatchExport/index.vue","webpack://cmp/src/components/BatchExport/index.vue","webpack://cmp/./src/components/BatchExport/index.vue?9c7f","webpack://cmp/./src/components/BatchExport/index.vue?bdd2","webpack://cmp/./src/views/infoQuery/frontFlowPool/frontMemberMag/index.vue","webpack://cmp/src/views/infoQuery/frontFlowPool/frontMemberMag/index.vue","webpack://cmp/./src/views/infoQuery/frontFlowPool/frontMemberMag/index.vue?aea8","webpack://cmp/./src/views/infoQuery/frontFlowPool/frontMemberMag/index.vue?0798","webpack://cmp/./src/utils/constant.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dropdown',{staticClass:\"fr\",attrs:{\"hide-on-click\":true,\"size\":_vm.size,\"trigger\":\"click\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"size\":_vm.size,\"disabled\":_vm.disabled}},[_vm._v(\" \"+_vm._s(_vm.$t('common.export'))),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportCsv.apply(null, arguments)}}},[_vm._v(\"CSV\")]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportTxt.apply(null, arguments)}}},[_vm._v(\"TXT\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n使用参考：\n<batchExport :queryId=\"1005\" :params=\"usageBatchParam\" :showMsg=\"userTable.length===0\"></batchExport>\nparams需要与queryId配置相匹配\nshowMsg为true时，不允许导出，只予以提示。用在先查询出数据才能导出场景\n\n-->\n\n<template>\n  <el-dropdown :hide-on-click=\"true\" class=\"fr\" :size=\"size\" trigger=\"click\">\n    <el-button plain :size=\"size\" :disabled=\"disabled\">\n      {{ $t('common.export') }}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n    </el-button>\n    <el-dropdown-menu slot=\"dropdown\">\n      <el-dropdown-item @click.native=\"exportCsv\">CSV</el-dropdown-item>\n      <el-dropdown-item @click.native=\"exportTxt\">TXT</el-dropdown-item>\n    </el-dropdown-menu>\n  </el-dropdown>\n</template>\n\n<script>\nimport fetch from '@/request/fetch'\n\nexport default {\n  components: {},\n  props: {\n    queryIdList: { type: Array, default: () => [] },\n    size: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    params: {\n      type: Object,\n      default: () => {\n        return {}\n      },\n    },\n    sheetName: {\n      type: String,\n      default: null,\n    },\n    queryId: {\n      type: [Number, String],\n      default: '',\n    },\n    showProd: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {}\n  },\n  computed: {},\n  methods: {\n    exportCsv() {\n      this.exprt('csv')\n    },\n    exportTxt() {\n      this.exprt('txt')\n    },\n    async exprt(fileType, origin) {\n      const param = { queryId: this.queryId, fileType: fileType, ...this.params }\n      let data = []\n      if (this.queryId === '2040') {\n        data = await fetch('/prodInst/exportSimCardList', param, { method: 'post' })\n      } else {\n        data = await fetch('/batch/export', param, { method: 'get' })\n      }\n      if (data && data.length > 0) {\n        this.errAlert(data)\n        return\n      }\n      this.success()\n    },\n    success() {\n      const self = this\n      const h = this.$createElement\n      this.$msgbox({\n        title: this.$t('batchUpload.actionSuccess'),\n        type: 'success',\n        center: true,\n        message: h('p', { class: 'fs12' }, [\n          this.$t('batchUpload.task'),\n          h(\n            'a',\n            { class: 'cor-blue', on: { click: self.viewProgress } },\n            this.$t('batchUpload.process')\n          ),\n        ]),\n        showCancelButton: false,\n        confirmButtonText: this.$t('batchUpload.know'),\n      })\n        .then(() => {})\n        .catch(() => {})\n    },\n    viewProgress() {\n      this.$msgbox.close()\n      this.$router.push('/common/download')\n    },\n    errAlert(errMsgList) {\n      const h = this.$createElement\n      const msg = h('div', { class: 'error-msg-box' }, [\n        ...(function () {\n          const arr = []\n          errMsgList.forEach((item) => {\n            arr.push(h('p', { class: 'cor-red' }, item))\n          })\n          return arr\n        })(),\n      ])\n      this.$msgbox({\n        title: this.$t('batchUpload.exportFail'),\n        type: 'warning',\n        center: true,\n        message: msg,\n        showCancelButton: false,\n        confirmButtonText: this.$t('batchUpload.know'),\n      })\n        .then(() => {})\n        .catch(() => {})\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a1e0ae6e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a1e0ae6e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"container-content\"},[_c('div',{staticClass:\"summary\"},_vm._l((_vm.infoList),function(item){return _c('div',{key:item.prop,staticClass:\"summary-item\"},[_c('img',{staticClass:\"summary-item-icon\",attrs:{\"src\":item.imgSrc}}),_c('div',{staticClass:\"summary-item-content\"},[_c('div',{staticClass:\"summary-item-title\"},[_vm._v(_vm._s(item.label))]),_c('div',{staticClass:\"summary-item-used\"},[_vm._v(\" \"+_vm._s(_vm.itemInfoFormatter(item))+\" \")])])])}),0),_c('div',{staticClass:\"container-bottom\"},[_c('div',{staticClass:\"container-form\"},[_c('el-form',{ref:\"qryParamRef\",attrs:{\"model\":_vm.qryParam,\"size\":\"small\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('traffic.memberNumber'),\"prop\":\"memberNumber\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.inputPh('traffic.memberNumber')},model:{value:(_vm.qryParam.memberNumber),callback:function ($$v) {_vm.$set(_vm.qryParam, \"memberNumber\", $$v)},expression:\"qryParam.memberNumber\"}})],1)],1),_c('el-col',{attrs:{\"span\":19}},[_c('el-form-item',[_c('div',{staticClass:\"search-button-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.loadData(false)}}},[_vm._v(_vm._s(_vm.$t('common.query')))]),_c('el-button',{attrs:{\"type\":\"info\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.reset}},[_vm._v(_vm._s(_vm.$t('common.reset')))])],1)])],1)],1),_c('div',{staticClass:\"tool-button-group\"},[_c('BatchExport',{attrs:{\"query-id\":2050,\"params\":_vm.simListExportParam,\"disabled\":_vm.tableData.length === 0}})],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",attrs:{\"data\":_vm.tableData,\"border\":true}},[_c('el-table-column',{attrs:{\"prop\":\"accNum\",\"label\":_vm.$t('traffic.memberNumber'),\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"statusCd\",\"label\":_vm.$t('traffic.statusCdName'),\"formatter\":_vm.rowFormatter,\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"poolMemberUsageValue\",\"label\":_vm.$t('traffic.usageRemain'),\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"effDate\",\"label\":_vm.$t('traffic.enterGroupDate'),\"show-overflow-tooltip\":\"\"}})],1),_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tableData.length > 0),expression:\"tableData.length > 0\"}],attrs:{\"background\":\"\",\"current-page\":_vm.page.pageIndex,\"align\":\"right\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.page.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"container-content\">\n      <div class=\"summary\">\n        <div v-for=\"item in infoList\" :key=\"item.prop\" class=\"summary-item\">\n          <img :src=\"item.imgSrc\" class=\"summary-item-icon\" />\n          <div class=\"summary-item-content\">\n            <div class=\"summary-item-title\">{{ item.label }}</div>\n            <div class=\"summary-item-used\">\n              {{ itemInfoFormatter(item) }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"container-bottom\">\n        <div class=\"container-form\">\n          <el-form ref=\"qryParamRef\" :model=\"qryParam\" size=\"small\">\n            <el-row :gutter=\"20\">\n              <el-col :span=\"5\">\n                <el-form-item :label=\"$t('traffic.memberNumber')\" prop=\"memberNumber\">\n                  <el-input\n                    v-model=\"qryParam.memberNumber\"\n                    :placeholder=\"inputPh('traffic.memberNumber')\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n              <!-- <el-col :span=\"5\">\n                <el-form-item :label=\"$t('dataUsage.billCycle')\" prop=\"billCycle\">\n                  <BillCycleSelect v-model=\"qryParam.billMonth\" />\n                </el-form-item>\n              </el-col> -->\n              <el-col :span=\"19\">\n                <el-form-item>\n                  <div class=\"search-button-group\">\n                    <el-button\n                      type=\"primary\"\n                      icon=\"el-icon-search\"\n                      @click=\"loadData(false)\"\n                      >{{ $t('common.query') }}</el-button\n                    >\n                    <el-button type=\"info\" icon=\"el-icon-refresh\" @click=\"reset\">{{\n                      $t('common.reset')\n                    }}</el-button>\n                  </div>\n                </el-form-item>\n              </el-col>\n            </el-row>\n            <div class=\"tool-button-group\">\n              <BatchExport\n                :query-id=\"2050\"\n                :params=\"simListExportParam\"\n                :disabled=\"tableData.length === 0\"\n              ></BatchExport>\n              <!-- <el-form-item label-width=\"0\">\n                <el-button icon=\"el-icon-download\" @click=\"exportClick()\">\n                  {{ $t('common.export') }}</el-button\n                ></el-form-item\n              > -->\n            </div>\n          </el-form>\n          <el-table ref=\"table\" v-loading=\"loading\" :data=\"tableData\" :border=\"true\">\n            <el-table-column\n              prop=\"accNum\"\n              :label=\"$t('traffic.memberNumber')\"\n              show-overflow-tooltip\n            ></el-table-column>\n            <el-table-column\n              prop=\"statusCd\"\n              :label=\"$t('traffic.statusCdName')\"\n              :formatter=\"rowFormatter\"\n              show-overflow-tooltip\n            ></el-table-column>\n            <el-table-column\n              prop=\"poolMemberUsageValue\"\n              :label=\"$t('traffic.usageRemain')\"\n              show-overflow-tooltip\n            ></el-table-column>\n            <el-table-column\n              prop=\"effDate\"\n              :label=\"$t('traffic.enterGroupDate')\"\n              show-overflow-tooltip\n            ></el-table-column>\n          </el-table>\n          <el-pagination\n            v-show=\"tableData.length > 0\"\n            background\n            :current-page=\"page.pageIndex\"\n            align=\"right\"\n            :page-sizes=\"[10, 20, 50, 100]\"\n            :page-size=\"page.pageSize\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"page.total\"\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n          >\n          </el-pagination>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport fetch from '@/request/fetch'\nimport { statusOptions } from '@/utils/constant'\nimport langMixin from '@/mixins/langMixin'\nimport BatchExport from '@/components/BatchExport'\nexport default {\n  components: {\n    BatchExport,\n  },\n  mixins: [langMixin],\n  data() {\n    return {\n      importTaskId: '',\n      tableData: [],\n      loading: false,\n      page: {\n        pageIndex: 1,\n        pageSize: 10,\n        total: 0,\n      },\n      detailInfo: {},\n      qryParam: {\n        memberNumber: '',\n        billMonth: '',\n      },\n    }\n  },\n  computed: {\n    simListExportParam() {\n      return {\n        ...this.qryParam,\n        grpNumber: this.detailInfo.accNum,\n        billCycle: this.qryParam.billMonth, // shenlixiang need this\n      }\n    },\n    statusOptions() {\n      return statusOptions.map((item) => {\n        return {\n          ...item,\n          label: this.$t('simMag.' + item.key),\n        }\n      })\n    },\n    infoList() {\n      return [\n        {\n          label: this.$t('traffic.groupId'),\n          formatter: () => this.detailInfo.accNum,\n          imgSrc: require('@/assets/image/sim/total_use.png'),\n        },\n        {\n          label: this.$t('traffic.billCycle'),\n          imgSrc: require('@/assets/image/sim/bill_cycle.png'),\n          formatter: () => this.detailInfo.billMonth,\n        },\n        {\n          label: this.$t('traffic.usageAvaMonth'),\n          imgSrc: require('@/assets/image/sim/pool_use.png'),\n          formatter: () => this.detailInfo.poolTotalValue,\n        },\n        {\n          label: this.$t('traffic.usageUsedMonth'),\n          imgSrc: require('@/assets/image/sim/pool_use.png'),\n          formatter: () => this.detailInfo.poolUsageValue,\n        },\n        {\n          label: this.$t('traffic.usageRemainMonth'),\n          imgSrc: require('@/assets/image/sim/pool_use.png'),\n          formatter: () => this.detailInfo.poolRemainValue,\n        },\n      ]\n    },\n  },\n  created() {\n    try {\n      this.detailInfo = JSON.parse(this.$route.query.row)\n      this.qryParam.billMonth = this.detailInfo.billMonth\n    } catch (e) {}\n  },\n  mounted() {\n    this.loadData(false)\n  },\n  methods: {\n    rowFormatter(row, col, val) {\n      const item = this.statusOptions.find((item) => item.value === val)\n      if (item) {\n        return this.$t('simMag.' + item.key)\n      }\n      return val\n    },\n    async loadData(pageChangeFlag) {\n      if (!pageChangeFlag) {\n        this.page.pageIndex = 1\n        this.page.pageSize = 10\n      }\n      const param = {\n        grpNumber: this.detailInfo.accNum,\n        ...this.qryParam,\n        pageInfo: {\n          ...this.page,\n        },\n      }\n      this.loading = true\n      const res = await fetch('/flowPool/qryForwardFlowPoolMemberList', param, {\n        method: 'post',\n      }).finally(() => {\n        this.loading = false\n      })\n      this.tableData = res.result || []\n      this.page.total = res.rowCount\n      // 列表查询使用量\n      this.qryAllFlowUsage()\n    },\n    async qryAllFlowUsage() {\n      const promises = this.tableData.map((row) => {\n        const params = {\n          prodInstId: row.prodInstId,\n          ...this.qryParam,\n        }\n        return this.qrySimMonthFlowUsage(params)\n      })\n      const totalFlowMBs = await Promise.all(promises)\n      totalFlowMBs.forEach((data, index) => {\n        this.$set(this.tableData[index], 'poolMemberUsageValue', data.memberUsage)\n      })\n    },\n    async qrySimMonthFlowUsage(params) {\n      const res = await fetch('/usageData/queryForwardMemberUsageInfo', params, {\n        method: 'get',\n      })\n      return res\n    },\n    itemInfoFormatter(obj) {\n      const des = obj.formatter ? obj.formatter() : this.detailInfo[obj.prop] ?? '-'\n      return des\n    },\n    handleSizeChange(val) {\n      this.page.pageSize = val\n      this.page.pageIndex = 1\n      this.loadData(true)\n    },\n    handleCurrentChange(val) {\n      this.page.pageIndex = val\n      this.loadData(true)\n    },\n    exportClick() {},\n\n    reset() {\n      this.$refs.qryParamRef.resetFields()\n      this.loadData(false)\n    },\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/assets/css/page.scss';\n.container-content {\n  flex: 1;\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.summary {\n  display: flex;\n  padding: 20px;\n  background-color: white;\n\n  &-item {\n    padding: 24px 0px 20px 0px;\n    width: 280px;\n    background: #f4f4f4;\n    margin-right: 20px;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    &-icon {\n      position: absolute;\n      left: 20px;\n      top: 21px;\n      height: 22px;\n      width: 22px;\n    }\n    &-content {\n      margin-left: 50px;\n    }\n    &-title {\n      font-weight: 500;\n      font-size: 14px;\n      color: #333333;\n    }\n    &-used {\n      margin-top: 20px;\n      font-weight: 500;\n      font-size: 24px;\n      color: #333333;\n      vertical-align: baseline;\n    }\n    &-unit {\n      font-size: 12px;\n      vertical-align: baseline;\n    }\n  }\n}\n\n.container-bottom {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  position: relative;\n  margin-top: 24px;\n  background-color: white;\n  .container-form {\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    padding: 24px;\n    .button-group {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=182b0f8d&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=182b0f8d&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"182b0f8d\",\n  null\n  \n)\n\nexport default component.exports","// export const supplierNbrOptions = [\n//   {\n//     value: 'CTG_SUPPLIER',\n//     label: 'CTG_SUPPLIER',\n//   },\n//   {\n//     value: 'DCP_SUPPLIER',\n//     label: 'DCP_SUPPLIER',\n//   },\n//   {\n//     value: 'MTS_SUPPLIER',\n//     label: 'MTS_SUPPLIER',\n//   },\n//   {\n//     value: 'WEBBING_SUPPLIER',\n//     label: 'WEBBING_SUPPLIER',\n//   },\n// ]\n\nexport const statusOptions = [\n  {\n    value: '100000',\n    label: '在用',\n    key: 'use',\n  },\n  // {\n  //   value: '110000',\n  //   label: '拆机',\n  //   key: 'destroy',\n  // },\n  {\n    value: '120000',\n    label: '停机',\n    key: 'stop',\n  },\n  // {\n  //   value: '130000',\n  //   label: '未竣工',\n  // },\n  // {\n  //   value: '140000',\n  //   label: '未激活(预开通)',\n  // },\n  // {\n  //   value: '140001',\n  //   label: '预开通',\n  // },\n  {\n    value: '140002',\n    label: '未激活',\n    key: 'unactivated',\n  },\n  // {\n  //   value: '140003',\n  //   label: '未激活(测试期)',\n  //   key: 'unactivated_test',\n  // },\n  // {\n  //   value: '100001',\n  //   label: '已激活(测试期)',\n  //   key: 'activated_test',\n  // },\n]\n\nexport const CT_ADDRESS_ID = '121215042193'\nexport const DCP_ADDRESS_ID = '160605376671'\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","size","disabled","_v","_s","$t","slot","nativeOn","$event","exportCsv","apply","arguments","exportTxt","staticRenderFns","components","props","queryIdList","type","Array","default","String","Boolean","params","Object","sheetName","queryId","Number","showProd","data","computed","methods","exprt","fileType","origin","param","fetch","method","length","errAlert","success","self","h","$createElement","$msgbox","title","center","message","class","on","click","viewProgress","showCancelButton","confirmButtonText","then","catch","close","$router","push","errMsgList","msg","arr","forEach","item","component","_l","infoList","key","prop","imgSrc","label","itemInfoFormatter","ref","qryParam","inputPh","model","value","memberNumber","callback","$$v","$set","expression","loadData","reset","simListExportParam","tableData","directives","name","rawName","loading","rowFormatter","page","pageIndex","pageSize","total","handleSizeChange","handleCurrentChange","BatchExport","mixins","langMixin","importTaskId","detailInfo","billMonth","grpNumber","accNum","billCycle","statusOptions","map","formatter","require","poolTotalValue","poolUsageValue","poolRemainValue","created","JSON","parse","$route","query","row","e","mounted","col","val","find","pageChangeFlag","pageInfo","res","finally","result","rowCount","qryAllFlowUsage","promises","prodInstId","qrySimMonthFlowUsage","totalFlowMBs","Promise","all","index","memberUsage","obj","des","exportClick","$refs","qryParamRef","resetFields","CT_ADDRESS_ID","DCP_ADDRESS_ID"],"sourceRoot":""}