"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[718],{88718:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"container"},[a("div",{directives:[{name:"watermark",rawName:"v-watermark",value:{text:e.accountbase.userCode+e.getDate(),textColor:"#ccc"},expression:"{\n      text: accountbase.userCode + getDate(),\n      textColor: '#ccc',\n    }"}],staticClass:"container-content"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticStyle:{width:"123px","margin-right":"80px"}},[a("div",{staticClass:"avatar-container"},[a("div",{staticClass:"avatar-container-header"})])]),a("el-col",[a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(" "+e._s(e.$t("accountMag.account")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.userCode))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(e._s(e.$t("accountMag.roleName")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.roleName))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(e._s(e.$t("accountMag.userName")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.userName))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(e._s(e.$t("accountMag.phone")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.phone))]),a("a",{staticClass:"cor-blue",on:{click:e.changePhone}},[e._v(" "+e._s(e.$t("common.edit")))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(" "+e._s(e.$t("accountMag.email")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.email))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(e._s(e.$t("accountMag.fax")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.fax))]),a("a",{staticClass:"cor-blue",on:{click:e.changeFax}},[e._v(" "+e._s(e.$t("common.edit")))])]),a("div",{staticClass:"text item"},[a("span",{staticClass:"item-key"},[e._v(e._s(e.$t("accountMag.corp")))]),a("span",{staticClass:"item-value"},[e._v(e._s(e.accountbase.corpName))])])])],1)],1),a("AddEditDialog",{attrs:{visible:e.addEditDialogVisible,"modify-type":e.modifyType,"user-id":e.userId},on:{"update:visible":function(a){e.addEditDialogVisible=a},modifyParam:function(a){return e.getData()}}})],1)},i=[],o=t(90408),c=function(){var e=this,a=e._self._c;return a("div",[a("el-dialog",{attrs:{title:e.modifyTitle,visible:e.v,"before-close":e.handleClose,width:"520px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(a){e.v=a}}},[a("el-form",{ref:"paramFormRef",staticClass:"demo-ruleForm",attrs:{model:e.paramForm,rules:e.paramRules,size:"small"}},["mobile"===e.modifyType?a("el-form-item",{attrs:{label:e.$t("accountMag.mobile"),prop:"mobile"}},[a("el-input",{attrs:{placeholder:e.inputPh("accountMag.mobile")},model:{value:e.paramForm.mobile,callback:function(a){e.$set(e.paramForm,"mobile",a)},expression:"paramForm.mobile"}},[a("ct-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:e.$t("accountMag.areaCode"),options:e.areaCodeOptions,filterable:""},slot:"prepend",model:{value:e.paramForm.areaCode,callback:function(a){e.$set(e.paramForm,"areaCode",a)},expression:"paramForm.areaCode"}})],1)],1):e._e(),"phone"===e.modifyType?a("el-form-item",{attrs:{label:e.$t("accountMag.phone"),prop:"phone"}},[a("el-input",{attrs:{placeholder:e.inputPh("accountMag.phone")},model:{value:e.paramForm.phone,callback:function(a){e.$set(e.paramForm,"phone",a)},expression:"paramForm.phone"}})],1):e._e(),"fax"===e.modifyType?a("el-form-item",{attrs:{label:e.$t("accountMag.fax"),prop:"fax"}},[a("el-input",{attrs:{placeholder:e.inputPh("accountMag.fax")},model:{value:e.paramForm.fax,callback:function(a){e.$set(e.paramForm,"fax",a)},expression:"paramForm.fax"}})],1):e._e()],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.clickOk}},[e._v(e._s(e.$t("common.ok")))]),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("common.cancel")))])],1)],1)],1)},r=[],l=t(41090),n=t(45101),m={mixins:[l.Z],props:{visible:{type:Boolean,default:!1},modifyType:{type:String,default:""},userId:{type:Number,default:0}},data(){return{paramForm:{},areaCodeOptions:[],paramRules:{mobile:[{validator:this.validatePhone,trigger:"blur"}]}}},computed:{v:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},modifyTitle(){return"mobile"===this.modifyType?this.$t("common.edit")+this.$t("accountMag.mobile"):"phone"===this.modifyType?this.$t("common.edit")+this.$t("accountMag.phone"):"fax"===this.modifyType?this.$t("common.edit")+this.$t("accountMag.fax"):""}},watch:{visible(e){e&&("mobile"===this.modifyType&&(this.paramForm={areaCode:"",mobile:""}),"phone"===this.modifyType&&(this.paramForm={phone:""}),"fax"===this.modifyType&&(this.paramForm={fax:""}))}},mounted(){this.queryAreaCodeList()},methods:{async queryAreaCodeList(){const e=await(0,n.Z)("/user/areaCodeList",{},{method:"get"});this.areaCodeOptions=e.map((e=>({value:e,label:e})))},clickOk(){this.$refs.paramFormRef.validate((async e=>{e&&(await(0,n.Z)("/user/modifyPerson",{...this.paramForm,userId:this.userId},{method:"post"}),this.$refs.paramFormRef.clearValidate(),this.$message.success(this.$t("common.editSuccess")),this.v=!1,this.$emit("modifyParam",!1))}))},cancel(){this.v=!1,this.$refs.paramFormRef.clearValidate()},handleClose(){this.cancel()},validatePhone(e,a,t){this.paramForm.areaCode||t(new Error(this.$t("accountMag.selectAreaCode"))),/^\d{1,15}$/.test(a)||t(new Error(this.$t("accountMag.correctMobile"))),t()}}},d=m,u=t(43736),p=(0,u.Z)(d,c,r,!1,null,"0dfe6d5d",null),h=p.exports,f=t(71602),b=t.n(f),v={components:{AddEditDialog:h},data(){return{accountbase:{userCode:"-",roleName:"-",name:"-",mobile:"-",phone:"-",email:"-",fax:"-",cust:"-"},addEditDialogVisible:!1,modifyType:""}},computed:{...(0,o.Se)("user",["userId"]),mobileStr(){return this.accountbase.mobileDesc?this.accountbase.areaCode&&this.accountbase.mobile?this.accountbase.areaCode+"-"+this.accountbase.mobile:"-":this.accountbase.mobile}},async mounted(){this.getData()},methods:{getDate(){return b()(new Date).format("YYYY-MM-DD HH:mm:ss")},async getData(){const e=await(0,n.Z)("/user/queryPersonDetail",{userId:this.userId,modifyFlag:0},{method:"get"});e.emailDesc&&(e.email=e.emailDesc),e.faxDesc&&(e.fax=e.faxDesc),e.mobileDesc&&(e.mobile=e.mobileDesc),e.phoneDesc&&(e.phone=e.phoneDesc),e.userNameDesc&&(e.userName=e.userNameDesc),e.corpNameDesc&&(e.corpName=e.corpNameDesc),this.accountbase=e},async updateUser(e){await(0,n.Z)("/user/modifyPerson",{...e,userId:this.userId},{method:"post"}),this.$message.success("修改成功"),this.getData()},changePhone(){this.addEditDialogVisible=!0,this.modifyType="phone"},changeMobile(){this.addEditDialogVisible=!0,this.modifyType="mobile"},changeEmail(){this.$prompt("请输入邮箱","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"邮箱格式不正确"}).then((({value:e})=>{this.updateUser({email:e})}))},changeFax(){this.addEditDialogVisible=!0,this.modifyType="fax"}}},y=v,g=(0,u.Z)(y,s,i,!1,null,"d1293c6e",null),C=g.exports}}]);
//# sourceMappingURL=718.d1bd45c9.js.map