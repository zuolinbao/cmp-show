"use strict";(self["webpackChunkcmp"]=self["webpackChunkcmp"]||[]).push([[536],{51957:function(t,e,a){a.d(e,{Z:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("el-dropdown",{staticClass:"fr",attrs:{"hide-on-click":!0,size:t.size,trigger:"click"}},[e("el-button",{attrs:{plain:"",size:t.size,disabled:t.disabled}},[t._v(" "+t._s(t.$t("common.export"))),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.exportCsv.apply(null,arguments)}}},[t._v("CSV")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.exportTxt.apply(null,arguments)}}},[t._v("TXT")])],1)],1)},s=[],o=(a(70560),a(88434)),i={components:{},props:{queryIdList:{type:Array,default:()=>[]},size:{type:String,default:""},disabled:{type:Boolean,default:!1},params:{type:Object,default:()=>({})},sheetName:{type:String,default:null},queryId:{type:[Number,String],default:""},showProd:{type:String,default:""}},data(){return{}},computed:{},methods:{exportCsv(){this.exprt("csv")},exportTxt(){this.exprt("txt")},async exprt(t,e){const a={queryId:this.queryId,fileType:t,...this.params};let r=[];r="2040"===this.queryId?await(0,o.Z)("/prodInst/exportSimCardList",a,{method:"post"}):await(0,o.Z)("/batch/export",a,{method:"get"}),r&&r.length>0?this.errAlert(r):this.success()},success(){const t=this,e=this.$createElement;this.$msgbox({title:this.$t("batchUpload.actionSuccess"),type:"success",center:!0,message:e("p",{class:"fs12"},[this.$t("batchUpload.task"),e("a",{class:"cor-blue",on:{click:t.viewProgress}},this.$t("batchUpload.process"))]),showCancelButton:!1,confirmButtonText:this.$t("batchUpload.know")}).then((()=>{})).catch((()=>{}))},viewProgress(){this.$msgbox.close(),this.$router.push("/common/download")},errAlert(t){const e=this.$createElement,a=e("div",{class:"error-msg-box"},[...function(){const a=[];return t.forEach((t=>{a.push(e("p",{class:"cor-red"},t))})),a}()]);this.$msgbox({title:this.$t("batchUpload.exportFail"),type:"warning",center:!0,message:a,showCancelButton:!1,confirmButtonText:this.$t("batchUpload.know")}).then((()=>{})).catch((()=>{}))}}},l=i,n=a(1001),c=(0,n.Z)(l,r,s,!1,null,"a1e0ae6e",null),m=c.exports},39536:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"container-content"},[e("div",{staticClass:"summary"},t._l(t.infoList,(function(a){return e("div",{key:a.prop,staticClass:"summary-item"},[e("img",{staticClass:"summary-item-icon",attrs:{src:a.imgSrc}}),e("div",{staticClass:"summary-item-content"},[e("div",{staticClass:"summary-item-title"},[t._v(t._s(a.label))]),e("div",{staticClass:"summary-item-used"},[t._v(" "+t._s(t.itemInfoFormatter(a))+" ")])])])})),0),e("div",{staticClass:"container-bottom"},[e("div",{staticClass:"container-form"},[e("el-form",{ref:"qryParamRef",attrs:{model:t.qryParam,size:"small"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:t.$t("traffic.memberNumber"),prop:"memberNumber"}},[e("el-input",{attrs:{placeholder:t.inputPh("traffic.memberNumber")},model:{value:t.qryParam.memberNumber,callback:function(e){t.$set(t.qryParam,"memberNumber",e)},expression:"qryParam.memberNumber"}})],1)],1),e("el-col",{attrs:{span:19}},[e("el-form-item",[e("div",{staticClass:"search-button-group"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.loadData(!1)}}},[t._v(t._s(t.$t("common.query")))]),e("el-button",{attrs:{type:"info",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v(t._s(t.$t("common.reset")))])],1)])],1)],1),e("div",{staticClass:"tool-button-group"},[e("BatchExport",{attrs:{"query-id":2050,params:t.simListExportParam,disabled:0===t.tableData.length}})],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.tableData,border:!0}},[e("el-table-column",{attrs:{prop:"accNum",label:t.$t("traffic.memberNumber"),"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"statusCd",label:t.$t("traffic.statusCdName"),formatter:t.rowFormatter,"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"poolMemberUsageValue",label:t.$t("traffic.usageRemain"),"show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"effDate",label:t.$t("traffic.enterGroupDate"),"show-overflow-tooltip":""}})],1),e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}],attrs:{background:"","current-page":t.page.pageIndex,align:"right","page-sizes":[10,20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])])},s=[],o=a(88434),i=a(58439),l=a(23060),n=a(51957),c={components:{BatchExport:n.Z},mixins:[l.Z],data(){return{importTaskId:"",tableData:[],loading:!1,page:{pageIndex:1,pageSize:10,total:0},detailInfo:{},qryParam:{memberNumber:"",billMonth:""}}},computed:{simListExportParam(){return{...this.qryParam,grpNumber:this.detailInfo.accNum,billCycle:this.qryParam.billMonth}},statusOptions(){return i.hm.map((t=>({...t,label:this.$t("simMag."+t.key)})))},infoList(){return[{label:this.$t("traffic.groupId"),formatter:()=>this.detailInfo.accNum,imgSrc:a(77543)},{label:this.$t("traffic.billCycle"),imgSrc:a(41948),formatter:()=>this.detailInfo.billMonth},{label:this.$t("traffic.usageAvaMonth"),imgSrc:a(37206),formatter:()=>this.detailInfo.poolTotalValue},{label:this.$t("traffic.usageUsedMonth"),imgSrc:a(37206),formatter:()=>this.detailInfo.poolUsageValue},{label:this.$t("traffic.usageRemainMonth"),imgSrc:a(37206),formatter:()=>this.detailInfo.poolRemainValue}]}},created(){try{this.detailInfo=JSON.parse(this.$route.query.row),this.qryParam.billMonth=this.detailInfo.billMonth}catch(t){}},mounted(){this.loadData(!1)},methods:{rowFormatter(t,e,a){const r=this.statusOptions.find((t=>t.value===a));return r?this.$t("simMag."+r.key):a},async loadData(t){t||(this.page.pageIndex=1,this.page.pageSize=10);const e={grpNumber:this.detailInfo.accNum,...this.qryParam,pageInfo:{...this.page}};this.loading=!0;const a=await(0,o.Z)("/flowPool/qryForwardFlowPoolMemberList",e,{method:"post"}).finally((()=>{this.loading=!1}));this.tableData=a.result||[],this.page.total=a.rowCount,this.qryAllFlowUsage()},async qryAllFlowUsage(){const t=this.tableData.map((t=>{const e={prodInstId:t.prodInstId,...this.qryParam};return this.qrySimMonthFlowUsage(e)})),e=await Promise.all(t);e.forEach(((t,e)=>{this.$set(this.tableData[e],"poolMemberUsageValue",t.memberUsage)}))},async qrySimMonthFlowUsage(t){const e=await(0,o.Z)("/usageData/queryForwardMemberUsageInfo",t,{method:"get"});return e},itemInfoFormatter(t){const e=t.formatter?t.formatter():this.detailInfo[t.prop]??"-";return e},handleSizeChange(t){this.page.pageSize=t,this.page.pageIndex=1,this.loadData(!0)},handleCurrentChange(t){this.page.pageIndex=t,this.loadData(!0)},exportClick(){},reset(){this.$refs.qryParamRef.resetFields(),this.loadData(!1)}}},m=c,u=a(1001),p=(0,u.Z)(m,r,s,!1,null,"182b0f8d",null),d=p.exports},58439:function(t,e,a){a.d(e,{HW:function(){return o},P4:function(){return s},hm:function(){return r}});const r=[{value:"100000",label:"在用",key:"use"},{value:"120000",label:"停机",key:"stop"},{value:"140002",label:"未激活",key:"unactivated"}],s="121215042193",o="160605376671"},41948:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAA0pJREFUSEu1lU1sFVUUx//nzJt51MejgsE0mBgjFYho+KjFyML4sfIzEi2hrCAsXGBJnqQhIQFe1I0aSAwbokYXJlatJE2MBhcm6KYhFUlIITwoDR8pNiyUUkr7Zvru39w7746vQAWN3N3cmfndc/7nf84VzLI6OhgMtWCB5KrNAmlCTsLpGggyDsAqp/NjraP4o7dXardCyE2bZWr7BO5PkLSoQTDbwXbfKGohwtGBAi6jLKbx2xngR8uM8uNxq4vwXyyCk9ViNHSyLLH/LQNbaNNYvJQqkX9pqA8LzGsQXQtwUbovI6DpJ7RPxQxnIMN4sjmqeHgKLlPbxuMlhBTcMxEaQUkgbwDQWYK3qfeR2KvCqjsSnDhajE5bWRy4vZstNZM84KEU+QjAmjtUY0DIbRAk9vtAw5GBD2VUnikzd2UiecwXipAdADruEFqPhd8o8IEv6L2FcFBWdXGhRMmDbtNqKvyqMf2vtwdYNP/vGhfmpEcaA3z6k8GBH50ZDCkbvOaMwwuyujTVCtVmJy3xNkQ2+mg3P6foenGmxL+cJP68Rqx5RDE+SWzYV7cx+aUI9tVPHZO2UvVx7wRCvwX4kAe//IRgd0eAXN3NY9eBtz6p4cRF4r2NARbOA9484PtDzgmMLTbEMJa27ng1DVyuhPQDCD3Ypn1oVw6FfLozlQClz2oYvEC80xlABSh9njVeIuBTDqygrOyOVzYUbgZ420uKTc8qJmPg2pQVEqiMEKcvEeueVPw2TOz4wkuB6yJ8OgOvKFWXByquJDdKMXcOcPjdHA4PEoeOGdyTF6f5fcU0g++PErt6UjAhwwqzPpPin4r3artiz3rFd78a9FeIIADCQBAoUHpFcfw8sfVjLwV7BNibFa/RbhBdTLLH223L84qtLyh+PkEcOUMHTGqp1Xa+rqhcIjpTVxgR6QTNWRe9tdvtGsT6eH5BEE/bien61q1ik+Bgv8H+H5yPewV8f0aD2Ie70tLu+DJ11Xi8LBuX/3EI2fF5rBidyoaQZbd2MT8vHy8FJfNx2uJmHYC1gNghlRDyu8AcEdE+r6kLTphcrUaVof1Sn3S+G+rwYhQv/l8Hfca/G1dTQ/C41WXq3k8zsVre7jL9C10spcqKUfG5AAAAAElFTkSuQmCC"},37206:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAy5JREFUSEu1lU1oXUUYht93zk8aw21KS/XSipT2YmtV+hOiWKS4cG8FI/5sXApa8VaCiNoeuhCqtCAuRATrQls1FYILsbhQUAgaxCy0NhJrEYLBRdqY3ib3nJx5y5x753hDe+MPdnZnZs4z37zf+31DdBlDQwqmqljLsNlPsBcho6UcgpQGUFNLPXO1GcyOjDC/FoJXTSYygw3cmCGrGoug28Fu3hrkEaKZ8T78gYS2c+8y8PZEcc98Wisi/BdD0EKzEk+dSZj630qwg/bOpVtlGPtFK7OZsPtAswfQhtY8pyE7JphRQ3uuBFmlC/3xpIe3wInMwHx6q8C+4luILFEn+BAA0yV4d/VRCUcN1SyOhBrfVeKfnSwFeHBY1dxmGz1U5OsA7vqHaoxTegZE5vYHJpoef40zvC9ReLGR3eETJfB5AENukzHAsScCVHoB6a9jJs4Lb35mkbfTJegjA7zqE7qmL/qBu/ZrPePslmLSaUp94K9/oh5g28arjeP2vvBejtMT5WlW4iNec6XRb9xdX6zBmP5CWuEAyMd8bN8eCRGuYLj7kyXMXmrvlk6QOFZ8WTvHgXrzTu8EwZwCtMmDvzgcov+G7kq/8rHFqTFvX54nrEs2aJVyYDjdLYvivgLHAEQedfpgiPWru4OTDy0+GS/rIiN0TwE2EHcOpzs7ErcM7COeXwCmZgRrARLYfBOLmzz3bo4vf2zrLFwmtbcE76g3bw8MV7UiXi7F54dCrKsAL76f40IDhQsWM+CBQWLf3Qb14zm+OtMCCzxnYB8upVgpeZ++FKK6Bnjq7Ryr2gJdWgTuvY14fK/Bs+/k+Pon7wydJHC0TF6n3UCzRdJJb7fjTwfYsYloLALTsyp87fy8YS0RBcCTb+WY+LUAW5KPQvaXInpnt5UK5OZ1xMtDBrUqEYfuui2NLzeBsUkLl7z2GCF0ZFmBXLeSLk5MZHbNp9vKdvkfm5Brn99X4rNlE3Ls2n71rO5Jt0IsfdwqcfsggD0AXZPKBP5O2G9IM+o1LYKjsj+b8eTUG2x3ug7/O3glTrf8r42+5F+Pp6mzeK/1mBbrS8qcln/3mF4BTc6Uyn2fyckAAAAASUVORK5CYII="},77543:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAwJJREFUSEu1lU9oHVUUxn/nTt68xpg+ESxBQdQEW1vFNLFKIy1duOnOoE9txYW4rhAxdKPyoKuqLZYu3QiCEVMkq25cuYoSajeiVtIo1eKzqPQZknZmkvvJnXTGeTTRKu3s5v753XO/c853jQ2+ZlPR/AB3Wk/SMKyXHqutrCKkNEKJVuqdoTZ/TE/b6noIu26wJbdriS0Z2YDzRBsdHMa9Y7VGrT3XxyVa5qtru8DbW4rri+lQHuF/+ISuJP3x/DctS4ttJThAezvpVjmLi0kv94Dhn8bcGOjutXG7iPyscDPO/EIJ8kqvNOJzBXwN3JIbXUwfFNaX/4uaNyYMexZwGwQfrj4jccyZkvxItHSmP/4+yJKDd01qYNVn9xRQmZ0AHr9BNeZMehUjC+sjV7s49461bV9LPZeXsoeLRAk7DDRvEHotFn3i4O0ioXf01b62nYd0l8XZvflg0NT0cfX6t2+CZ3Y79jxkxD1w9gdxalb89JuqZ3vJXig0V1q7YCMTV4dwrpFLK17D7GCxY3MvHDkQsWd7d1XOt8XrH3guVOHSR2Ycz/d637HRieSRohKEOwW6rwA//6Tj8Pj6uTt9RrwxVe0N+9HwIdmYV2qjk+mIPHlIwmaBWgE+8UqUS7CUhCDAWVgDQZ5fO7D/yEpVjszQ7hzskA1PpsOVxHWBj78csW+H8ekXnpOnPcsJ7B9xvNV0XF6Gp1oVsFg2094S/OhEsiNytmkt4m4pxp9wvNl0/L4I73/mudQRB/c6Hhs0zrdF892/pRC24PDPlVL8U/L66nD0pYixbddbyrc/ixffq2qsKYNjZfKq5Ya5QUlT1XLb0oAQ+fD9RuM26CzD1RS+WhAffl76jjezA8ifz28eyu1mNAgwbehoV4PcspbONWnJ7VxMt5V2+T9NKNjn2f74u9KEAnvokOqb6+lWZGUdr7W4HwfGwIJJZcJ+MfyXZm6m0DQPzpT9mcTn5k/aNaerlHiA98fp4E01+pJ/K56man+u95jm8yvKgpb/9pj+BeJkg8q5I72pAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=536.e6b87567.js.map