{"version":3,"file":"static/js/106.75953a7c.js","mappings":"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","sources":["webpack://cmp/./src/views/sysMag/roleMag/index.vue","webpack://cmp/./src/utils/functions.js","webpack://cmp/src/views/sysMag/roleMag/index.vue","webpack://cmp/./src/views/sysMag/roleMag/index.vue?2e68","webpack://cmp/./src/views/sysMag/roleMag/index.vue?eccf"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"container-form\"},[_c('el-form',{ref:\"qryParamRef\",attrs:{\"model\":_vm.qryParam,\"size\":\"small\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('roleMag.roleCode'),\"prop\":\"roleCode\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.inputPh('roleMag.roleCode')},model:{value:(_vm.qryParam.roleCode),callback:function ($$v) {_vm.$set(_vm.qryParam, \"roleCode\", $$v)},expression:\"qryParam.roleCode\"}})],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('roleMag.roleName'),\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.inputPh('roleMag.roleName')},model:{value:(_vm.qryParam.roleName),callback:function ($$v) {_vm.$set(_vm.qryParam, \"roleName\", $$v)},expression:\"qryParam.roleName\"}})],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('roleMag.qryTime'),\"prop\":\"createTimeBegin\"}},[_c('ct-date-picker',{attrs:{\"begin\":_vm.qryParam.createTimeBegin,\"end\":_vm.qryParam.createTimeEnd},on:{\"update:begin\":function($event){return _vm.$set(_vm.qryParam, \"createTimeBegin\", $event)},\"update:end\":function($event){return _vm.$set(_vm.qryParam, \"createTimeEnd\", $event)}}})],1)],1),_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"label-width\":\"0\"}},[_c('div',{staticClass:\"search-button-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.qryCmpParamPage(false)}}},[_vm._v(_vm._s(_vm.$t('common.query')))]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.reset}},[_vm._v(_vm._s(_vm.$t('common.reset')))])],1)])],1)],1),_c('div',{directives:[{name:\"compPriv\",rawName:\"v-compPriv\",value:(36),expression:\"36\"}],staticClass:\"tool-button-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.add}},[_vm._v(_vm._s(_vm.$t('roleMag.createBtn')))])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",staticClass:\"container-table\",attrs:{\"data\":_vm.tableData,\"border\":true,\"height\":\"100%\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleCode\",\"label\":_vm.$t('roleMag.roleCode'),\"show-overflow-tooltip\":\"\",\"min-width\":\"110\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{staticClass:\"cor-blue\",on:{\"click\":function($event){return _vm.toDetail(scope.row.roleId)}}},[_vm._v(_vm._s(scope.row.roleCode))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":_vm.$t('roleMag.roleName'),\"show-overflow-tooltip\":\"\",\"min-width\":\"110\"}}),_c('el-table-column',{attrs:{\"prop\":\"createStaffName\",\"label\":_vm.$t('roleMag.createStaffName'),\"show-overflow-tooltip\":\"\",\"min-width\":\"110\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":_vm.$t('roleMag.createTime'),\"show-overflow-tooltip\":\"\",\"min-width\":\"110\"}}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":_vm.$t('roleMag.remark'),\"show-overflow-tooltip\":\"\",\"min-width\":\"110\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('common.action'),\"fixed\":\"right\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"action-button-group\"},[_c('el-button',{directives:[{name:\"compPriv\",rawName:\"v-compPriv\",value:(37),expression:\"37\"}],attrs:{\"disabled\":scope.row.roleLevel === 1,\"type\":\"text\"},on:{\"click\":function($event){return _vm.modify(scope.row.roleId)}}},[_vm._v(_vm._s(_vm.$t('common.edit')))]),_c('el-button',{directives:[{name:\"compPriv\",rawName:\"v-compPriv\",value:(38),expression:\"38\"}],staticClass:\"cor-red\",attrs:{\"disabled\":scope.row.roleLevel === 1,\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row.roleId)}}},[_vm._v(_vm._s(_vm.$t('common.delete')))])],1)]}}])})],1),_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tableData.length > 0),expression:\"tableData.length > 0\"}],attrs:{\"background\":\"\",\"current-page\":_vm.page.pageIndex,\"align\":\"right\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.page.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/** 公共方法类 */\n// import { getToken } from '@/utils/auth'\n// import config from '@/config/config'\n\n/**\n * 格式化文件大小\n *\n * @param {String} value 文件大小(字节)\n */\nexport function formateSize(value) {\n  if (value == null || value == '') {\n    return '0'\n  }\n  const unitArr = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  let index = 0\n  const srcsize = parseFloat(value)\n  index = Math.floor(Math.log(srcsize) / Math.log(1000))\n  let size = srcsize / Math.pow(1000, index)\n  size = size.toFixed(2) // 保留的小数位数\n  return size + unitArr[index]\n}\n/**\n * 获取文件后缀名\n *\n * @param {String} fileName\n */\nexport function getFileExt(fileName) {\n  let ext = fileName.split('.')\n  ext = ext[ext.length - 1] // 获取文件后缀名\n  return ext\n}\n\n/**\n * 根据图片url下载图片\n * @param {String} imgsrc\n * @param {String} name\n */\nexport function downloadIamge(imgsrc, name) {\n  // 下载图片地址和图片名\n  const image = new Image()\n  // 解决跨域 Canvas 污染问题\n  image.setAttribute('crossOrigin', 'anonymous')\n  image.onload = function () {\n    const canvas = document.createElement('canvas')\n    canvas.width = image.width\n    canvas.height = image.height\n    const context = canvas.getContext('2d')\n    context.drawImage(image, 0, 0, image.width, image.height)\n    const url = canvas.toDataURL('image/png') // 得到图片的base64编码数据\n    const a = document.createElement('a') // 生成一个a元素\n    const event = new MouseEvent('click') // 创建一个单击事件\n    a.download = name || 'photo' // 设置图片名称\n    a.href = url // 将生成的URL设置为a.href属性\n    a.dispatchEvent(event) // 触发a的单击事件\n  }\n  image.src = imgsrc\n}\n\n/**\n * 通过图片url获取图片大小\n *\n * @param {String} imgsrc 例如图片名： D8x5f13a53dbc4b9_350x345.png\n */\nexport function getImageInfo(imgsrc) {\n  const data = {\n    width: 0,\n    height: 0,\n  }\n\n  const arr = imgsrc.split('_')\n  if (arr.length == 1) return data\n\n  let info = arr[arr.length - 1].match(/\\d+x\\d+/g)\n  if (info == null) return data\n\n  info = info[0].split('x')\n  return {\n    width: parseInt(info[0]),\n    height: parseInt(info[1]),\n  }\n}\n\n/**\n * 文件下载方法\n *\n * @param {Number} cr_id\n */\n// export function download(cId) {\n//   const api = config.BASE_API_URL\n//   const token = getToken()\n//   try {\n//     const link = document.createElement('a')\n//     link.target = '_blank'\n//     link.href = `${api}/api/v1/talk/records/file/download?cr_id=${cId}&token=${token}`\n//     link.click()\n//   } catch (e) {}\n// }\n\n/**\n * 去除字符串控制\n *\n * @param {String} str\n */\nexport function trim(str, type = null) {\n  if (type) {\n    return str.replace(/(^\\s*)|(\\s*$)/g, '')\n  } else if (type == 'l') {\n    return str.replace(/(^\\s*)/g, '')\n  } else {\n    return str.replace(/(\\s*$)/g, '')\n  }\n}\n\n/**\n * 解析url中参数\n *\n * @param {String} url\n * @returns {Object}\n */\nexport function param2Obj(url) {\n  const search = url.split('?')[1]\n\n  if (!search) return {}\n\n  return JSON.parse(\n    '{\"' +\n      decodeURIComponent(search)\n        .replace(/\"/g, '\\\\\"')\n        .replace(/&/g, '\",\"')\n        .replace(/=/g, '\":\"')\n        .replace(/\\+/g, ' ') +\n      '\"}'\n  )\n}\n\n/**\n * @param {Object} json\n * @returns {Array}\n */\nexport function param(json) {\n  if (!json) return ''\n  return cleanArray(\n    Object.keys(json).map((key) => {\n      if (json[key] === undefined) return ''\n\n      return encodeURIComponent(key) + '=' + encodeURIComponent(json[key])\n    })\n  ).join('&')\n}\n\n/**\n * @param {Array} actual\n * @returns {Array}\n */\nexport function cleanArray(actual) {\n  const newArray = []\n  for (let i = 0; i < actual.length; i++) {\n    if (actual[i]) {\n      newArray.push(actual[i])\n    }\n  }\n\n  return newArray\n}\n\n/**\n * @param {HTMLElement} element\n * @param {String} className\n */\nexport function toggleClass(element, className) {\n  if (!element || !className) {\n    return\n  }\n\n  let classString = element.className\n  const nameIndex = classString.indexOf(className)\n  if (nameIndex === -1) {\n    classString += '' + className\n  } else {\n    classString =\n      classString.substr(0, nameIndex) + classString.substr(nameIndex + className.length)\n  }\n  element.className = classString\n}\n\n/**\n * Check if an element has a class\n *\n * @param {HTMLElement} elm\n * @param {String} cls\n * @returns {Boolean}\n */\nexport function hasClass(ele, cls) {\n  return !!ele.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'))\n}\n\n/**\n * Add class to element\n *\n * @param {HTMLElement} elm\n * @param {String} cls\n */\nexport function addClass(ele, cls) {\n  if (!hasClass(ele, cls)) ele.className += ' ' + cls\n}\n\n/**\n * Remove class from element\n *\n * @param {HTMLElement} elm\n * @param {String} cls\n */\nexport function removeClass(ele, cls) {\n  if (hasClass(ele, cls)) {\n    const reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)')\n    ele.className = ele.className.replace(reg, ' ')\n  }\n}\n\n/**\n * 通过图片Url获取图片等比例缩放的宽度和高度信息\n *\n * @param {String} src\n * @param {Number} width\n */\nexport function imgZoom(src, width = 200) {\n  const info = getImageInfo(src)\n\n  if (info.width < width) {\n    return {\n      width: `${info.width}px`,\n      height: `${info.height}px`,\n    }\n  }\n\n  return {\n    width: width + 'px',\n    height: parseInt(info.height / (info.width / width)) + 'px',\n  }\n}\n\n/**\n * 获取浏览器光标选中内容\n *\n * @export\n * @returns\n */\nexport function getSelection() {\n  return window.getSelection\n    ? window.getSelection().toString()\n    : document.selection.createRange().text\n}\n\n/**\n * 隐藏用户手机号中间四位\n *\n * @param {String} phone  手机号\n */\nexport function hidePhone(phone) {\n  return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n}\n\n/**\n * 人性化显示时间\n *\n * @param {Object} datetime\n */\n// export function beautifyTime(datetime = '') {\n//   if (datetime == null) {\n//     return ''\n//   }\n\n//   datetime = datetime.replace(/-/g, '/')\n\n//   const time = new Date()\n//   let outTime = new Date(datetime)\n//   if (/^[1-9]\\d*$/.test(datetime)) {\n//     outTime = new Date(parseInt(datetime) * 1000)\n//   }\n\n//   if (time.getTime() < outTime.getTime()) {\n//     return parseTime(outTime, '{y}/{m}/{d}')\n//   }\n\n//   if (time.getFullYear() != outTime.getFullYear()) {\n//     return parseTime(outTime, '{y}/{m}/{d}')\n//   }\n\n//   if (time.getMonth() != outTime.getMonth()) {\n//     return parseTime(outTime, '{m}/{d}')\n//   }\n\n//   if (time.getDate() != outTime.getDate()) {\n//     const day = outTime.getDate() - time.getDate()\n//     if (day == -1) {\n//       return parseTime(outTime, '昨天 {h}:{i}')\n//     }\n\n//     if (day == -2) {\n//       return parseTime(outTime, '前天 {h}:{i}')\n//     }\n\n//     return parseTime(outTime, '{m}-{d}')\n//   }\n\n//   if (time.getHours() != outTime.getHours()) {\n//     return parseTime(outTime, '{h}:{i}')\n//   }\n\n//   let minutes = outTime.getMinutes() - time.getMinutes()\n//   if (minutes == 0) {\n//     return '刚刚'\n//   }\n\n//   minutes = Math.abs(minutes)\n//   return `${minutes}分钟前`\n// }\n\nexport function getSort(fn) {\n  return function (a, b) {\n    let ret = 0\n\n    if (fn.call(this, a, b)) {\n      ret = -1\n    } else if (fn.call(this, b, a)) {\n      ret = 1\n    }\n\n    return ret\n  }\n}\n\n/**\n * 批量排序\n *\n * @param {*} arr\n */\nexport function getMutipSort(arr) {\n  return function (a, b) {\n    let tmp\n    let i = 0\n\n    do {\n      tmp = arr[i++](a, b)\n    } while (tmp == 0 && i < arr.length)\n\n    return tmp\n  }\n}\n\n/**\n * Url 替换超链接\n *\n * @param {String} text 文本\n * @param {String} color 超链接颜色\n */\nexport function textReplaceLink(text, color = '#409eff') {\n  const exp = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi\n  return text.replace(\n    exp,\n    `<a href='$1' target=\"_blank\" style=\"color:${color};text-decoration: revert;\">$1</a >`\n  )\n}\n\n/**\n * 防抖\n *\n * @param {*} func\n * @param {*} wait\n * @param {*} immediate\n * @returns\n */\nexport function debounce(func, wait, immediate) {\n  let timeout\n\n  return function () {\n    const context = this\n    const args = arguments\n\n    if (timeout) clearTimeout(timeout) // timeout 不为null\n    if (immediate) {\n      const callNow = !timeout // 第一次会立即执行，以后只有事件执行后才会再次触发\n      timeout = setTimeout(function () {\n        timeout = null\n      }, wait)\n      if (callNow) func.apply(context, args)\n    } else {\n      timeout = setTimeout(function () {\n        func.apply(context, args)\n      }, wait)\n    }\n  }\n}\n\nexport function getLabel(options, value) {\n  const option = options.find((item) => item.value === value)\n  return option?.label ?? ''\n}\n","<template>\n  <div class=\"container\">\n    <div class=\"container-form\">\n      <el-form ref=\"qryParamRef\" :model=\"qryParam\" size=\"small\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"5\">\n            <el-form-item :label=\"$t('roleMag.roleCode')\" prop=\"roleCode\">\n              <el-input\n                v-model=\"qryParam.roleCode\"\n                :placeholder=\"inputPh('roleMag.roleCode')\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item :label=\"$t('roleMag.roleName')\" prop=\"roleName\">\n              <el-input\n                v-model=\"qryParam.roleName\"\n                :placeholder=\"inputPh('roleMag.roleName')\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item :label=\"$t('roleMag.qryTime')\" prop=\"createTimeBegin\">\n              <ct-date-picker\n                :begin.sync=\"qryParam.createTimeBegin\"\n                :end.sync=\"qryParam.createTimeEnd\"\n              >\n              </ct-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"9\">\n            <el-form-item label-width=\"0\">\n              <div class=\"search-button-group\">\n                <el-button\n                  type=\"primary\"\n                  icon=\"el-icon-search\"\n                  @click=\"qryCmpParamPage(false)\"\n                  >{{ $t('common.query') }}</el-button\n                >\n                <el-button icon=\"el-icon-refresh\" @click=\"reset\">{{\n                  $t('common.reset')\n                }}</el-button>\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <div v-compPriv=\"36\" class=\"tool-button-group\">\n          <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"add\">{{\n            $t('roleMag.createBtn')\n          }}</el-button>\n        </div>\n      </el-form>\n      <el-table\n        ref=\"table\"\n        v-loading=\"loading\"\n        class=\"container-table\"\n        :data=\"tableData\"\n        :border=\"true\"\n        height=\"100%\"\n      >\n        <el-table-column\n          prop=\"roleCode\"\n          :label=\"$t('roleMag.roleCode')\"\n          show-overflow-tooltip\n          min-width=\"110\"\n        >\n          <template slot-scope=\"scope\">\n            <a class=\"cor-blue\" @click=\"toDetail(scope.row.roleId)\">{{\n              scope.row.roleCode\n            }}</a>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"roleName\"\n          :label=\"$t('roleMag.roleName')\"\n          show-overflow-tooltip\n          min-width=\"110\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"createStaffName\"\n          :label=\"$t('roleMag.createStaffName')\"\n          show-overflow-tooltip\n          min-width=\"110\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"createTime\"\n          :label=\"$t('roleMag.createTime')\"\n          show-overflow-tooltip\n          min-width=\"110\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"remark\"\n          :label=\"$t('roleMag.remark')\"\n          show-overflow-tooltip\n          min-width=\"110\"\n        >\n        </el-table-column>\n        <el-table-column :label=\"$t('common.action')\" fixed=\"right\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <div class=\"action-button-group\">\n              <el-button\n                v-compPriv=\"37\"\n                :disabled=\"scope.row.roleLevel === 1\"\n                type=\"text\"\n                @click=\"modify(scope.row.roleId)\"\n                >{{ $t('common.edit') }}</el-button\n              >\n              <!-- <div class=\"action-button-group-seperator\"></div> -->\n              <el-button\n                v-compPriv=\"38\"\n                :disabled=\"scope.row.roleLevel === 1\"\n                class=\"cor-red\"\n                type=\"text\"\n                @click=\"deleteRole(scope.row.roleId)\"\n                >{{ $t('common.delete') }}</el-button\n              >\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        v-show=\"tableData.length > 0\"\n        background\n        :current-page=\"page.pageIndex\"\n        align=\"right\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"page.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"page.total\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport langMixin from '@/mixins/langMixin'\nimport { mapGetters } from 'vuex'\nimport { getLabel } from '@/utils/functions.js'\nimport fetch from '@/request/fetch'\nexport default {\n  mixins: [langMixin],\n  data() {\n    return {\n      powerSearch: false,\n      loading: false,\n      page: {\n        pageIndex: 1,\n        pageSize: 10,\n        total: 0,\n      },\n      channelIdOptions: [],\n      tableData: [],\n      statusCd: '1000',\n      qryParam: {\n        roleCode: '', // 角色编码，选填\n        roleName: '', // 角色名称   选填\n      },\n      saleList: [],\n      modifyForm: {},\n      pickerOptions: {\n        disabledDate(time) {\n          return (\n            time.getTime() < Date.now() - 30 * 24 * 60 * 60 * 1000 ||\n            time.getTime() > Date.now()\n          )\n        },\n      },\n    }\n  },\n  computed: {\n    ...mapGetters('user', ['userRoleType']),\n  },\n  mounted() {\n    this.qryCmpParamPage(false)\n  },\n  methods: {\n    async qryCmpParamPage(pageChangeFlag) {\n      if (!pageChangeFlag) {\n        this.page.pageIndex = 1\n        this.page.pageSize = 10\n      }\n      const param = {\n        ...this.qryParam,\n        ...this.page,\n      }\n      this.loading = true\n      const res = await fetch('/role/queryRolePage', param, { method: 'post' }).finally(\n        () => {\n          this.loading = false\n        }\n      )\n      this.tableData = res.list\n      this.page.total = res.total\n    },\n    toDetail(roleId) {\n      this.$router.push({\n        name: 'modifyRole',\n        query: { roleId, readOnly: true },\n      })\n    },\n    handleSizeChange(val) {\n      this.page.pageSize = val\n      this.page.pageIndex = 1\n      this.qryCmpParamPage(true)\n    },\n    handleCurrentChange(val) {\n      this.page.pageIndex = val\n      this.qryCmpParamPage(true)\n    },\n    add() {\n      this.$router.push({\n        name: 'createRole',\n      })\n    },\n    modify(roleId) {\n      this.$router.push({\n        name: 'modifyRole',\n        query: { roleId },\n      })\n    },\n    getLabel(a, b) {\n      return getLabel(a, b)\n    },\n    modifyParam(value) {\n      if (value) {\n        this.modifyForm = null\n        this.qryCmpParamPage(false)\n      }\n    },\n    deleteRole(roleId) {\n      this.$confirm(this.$t('roleMag.deleteAsk'), {\n        confirmButtonText: this.$t('common.yes'),\n        cancelButtonText: this.$t('common.no'),\n        type: 'warning',\n      })\n        .then(() => {\n          this.loading = true\n          fetch('/role/removeRole', { roleId }, { method: 'get' })\n            .then((res) => {\n              this.$message({\n                type: 'success',\n                message: this.$t('common.deleteSuccess'),\n              })\n              this.qryCmpParamPage(false)\n            })\n            .finally(() => {\n              this.loading = false\n            })\n        })\n        .catch(() => {})\n    },\n    // 重置\n    reset() {\n      this.$refs.qryParamRef.resetFields()\n      this.qryCmpParamPage(false)\n    },\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/assets/css/page.scss';\n.action-button-group {\n  display: flex;\n  .el-button:first-child {\n    padding-left: 0;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ed5017ce&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ed5017ce&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ed5017ce\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","qryParam","$t","inputPh","model","value","roleCode","callback","$$v","$set","expression","roleName","createTimeBegin","createTimeEnd","on","$event","qryCmpParamPage","_v","_s","reset","directives","name","rawName","add","loading","tableData","scopedSlots","_u","key","fn","scope","toDetail","row","roleId","roleLevel","modify","deleteRole","length","page","pageIndex","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","getLabel","options","option","find","item","label","mixins","langMixin","data","powerSearch","channelIdOptions","statusCd","saleList","modifyForm","pickerOptions","disabledDate","time","getTime","Date","now","computed","mapGetters","mounted","methods","pageChangeFlag","param","res","fetch","method","finally","list","$router","push","query","readOnly","val","a","b","modifyParam","$confirm","confirmButtonText","cancelButtonText","type","then","$message","message","catch","$refs","qryParamRef","resetFields","component"],"sourceRoot":""}